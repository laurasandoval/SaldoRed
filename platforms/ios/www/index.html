<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, viewport-fit=cover">
  <link rel="stylesheet" type="text/css" href="css/index.css">
  <title>Saldo Red</title>

  <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
  <script type="text/javascript">

  data = {
    savedCards: [], lastCard: [{type: "undefined", num: "undefined", saldo: "···", leftTrips: "···", status: "ok"}]
  };

  TESelection = "end";

  function openMenu(specifiedMenu) {
    $(".content-wrapper").animate({ scrollTop: 0 }, 300);
    $(".overlay-menus").removeClass().addClass("overlay-menus").addClass(specifiedMenu);

    if (specifiedMenu == "addMoney") {
      // Revisa la URL del iFrame cuando esta cambia para vincular eventos con app.
      var iframe = document.getElementById("tbk");
      iframe.addEventListener('load', function() {
        checkiFrame();
      })

      $("main").addClass("fixed");
    } else if (specifiedMenu == "myCards") {
      TESelection = "start";
      TapticEngine.gestureSelectionStart();
    } else {
      // Don't worry baby.
    }
  }

  function closeMenu(specifiedMenu) {
    // Correcciones generales.
    document.activeElement.blur();
    $("iframe#tbk").attr("src","");
    $("#transitCard").val("");
    $("main").removeClass("fixed");

    // Para que al volver a agregar una tarjeta no quede marcada la última que se agregó.
    selectThisCard('Bip');

    // Si no se especifica qué menú cerrar, se cierran todos.
    if(specifiedMenu == null) {
      $(".overlay-menus").removeClass().addClass("overlay-menus");
    } else if (specifiedMenu == "addMoney") {
      $(".overlay-menus").removeClass(specifiedMenu);
    } else if (specifiedMenu == "myCards") {
      TapticEngine.gestureSelectionEnd();
      TESelection = "end";
      $(".overlay-menus").removeClass(specifiedMenu);
    } else {
      $(".overlay-menus").removeClass(specifiedMenu);
    }
  }

  function getLastCardUsed() {
    setCurrentCard((data['lastCard'][0].type), (data['lastCard'][0].num));
  }

  function setCurrentCard(type, num) {

    if (TESelection == "start") {
      TapticEngine.gestureSelectionChanged();
    } else { }

    $(".buttons").animate({ scrollLeft: 0 }, 300);

    if (data['savedCards'].find(obj => (obj.num === num && obj.type === type)).status == "ok") {
      $("main").removeClass().addClass("card-" + type.toLowerCase());
    } else if (data['savedCards'].find(obj => (obj.num === num && obj.type === type)).status == "error") {
      $("main").removeClass().addClass("card-" + type.toLowerCase()).addClass("error");
    }

    $("main").attr("data-type", type);
    $("main").attr("data-num", num);
    $(".saved-cards button").removeClass("selected");
    $(".saved-cards button[data-type='" + type + "'][data-num='" + num + "']").addClass("selected");

    // From https://stackoverflow.com/questions/7364150/find-object-by-id-in-an-array-of-javascript-objects
    var lastCardSaldo = data['savedCards'].find(obj => (obj.num === num && obj.type === type)).saldo;
    var lastCardLeftTrips = data['savedCards'].find(obj => (obj.num === num && obj.type === type)).leftTrips;

    $('*[data-type="' + type + '"][data-num="' + num + '"] .saldo').html(lastCardSaldo);
    $('*[data-type="' + type + '"][data-num="' + num + '"] .leftTrips').html(lastCardLeftTrips);
    data['lastCard'][0].type = type;
    data['lastCard'][0].num = num;
    data['lastCard'][0].saldo = lastCardSaldo;
    data['lastCard'][0].leftTrips = lastCardLeftTrips;
    localStorage.setItem('data', JSON.stringify(data));
    $("html, body, .content-wrapper").animate({ scrollTop: 0 }, 200);
    getTarifa();
    setTimeout(function(){
      closeMenu();
    }, 200);
  }

  function getTarifa() {
    currentDay = ["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"][(new Date()).getDay()]
    currentHour = ("0" + ((new Date()).getHours())).slice(-2);
    currentMinute = ("0" + ((new Date()).getMinutes())).slice(-2);;
    currentDayOfMonth = (new Date()).getDate();
    currentMonth = ["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"][(new Date()).getMonth()]
    currentYear = (new Date()).getFullYear();
    now = (new Date()).getHours() * 60 + (new Date()).getMinutes();

    if (currentDay == "Lunes" ||
    currentDay == "Martes" ||
    currentDay == "Miércoles" ||
    currentDay == "Jueves" ||
    currentDay == "Viernes") {

      // Self-Note: La lógica detrás de esto es medir la hora del día en minutos desde las 00:00.
      // Así, como estamos comparando variables (hh:mm) en una misma unidad de medida (minutos),
      // podemos establecer condiciones como estas – donde se comparan 2 puntos del día con el actual.

      // Entre 7:00 y 8:59 hrs. o 18:00 y 19:59 hrs.
      if ((7 * 60) <= now && now <= (8 * 60 + 59) || (18 * 60) <= now && now <= (19 * 60 + 59)) {
        block = "Horario Punta";
        tarifaBip = "800";

        // Entre 6:00 y 6:29 hrs. o 20:45 y 23:00 hrs.
      } else if ((6 * 60) <= now && now <= (6 * 60 + 29) || (20 * 60 + 45) <= now && now <= (23 * 60)) {
        block = "Horario Bajo";
        tarifaBip = "700";

        // Entre 6:30 y 6:59 hrs. o 9:00 y 17:59 hrs. o 20:00 y 20:44 hrs.
      } else if ((6 * 60 + 30) <= now && now <= (6 * 60 + 59) || (9 * 60) <= now && now <= (17 * 60 + 59) || (20 * 60) <= now && now <= (20 * 60 + 44)) {
        block = "Horario Valle";
        tarifaBip = "720";
      } else {
        block = "Noche";
        tarifaBip = "700";
      }
    } else {
      // Fin de semana
      block = "Fin de Semana";
      tarifaBip = "720";
    }

    tarifaPase = "230";

    fechaActual = currentDay + ", " + currentDayOfMonth + " de " + currentMonth + " de " + currentYear;
    horaActual = currentHour + ":" + currentMinute;

    $("main .currentBlock").html(block);
    $("main[data-type='Bip'] .currentFare").html("$" + tarifaBip);
    $("main[data-type='Pase'] .currentFare").html("$" + tarifaPase);

  }

  function getSavedCards() {
    $(".saved-cards").html("");
    if (data.savedCards.length == 0) {
      $("main").removeClass().addClass("noCards");
    } else {

      if (data.savedCards.length >= 5) {
        $(".addCardButton").css("display","none");
      } else {
        $(".addCardButton").css("display","block");
      }

      var bipLogoSVG = '<svg data-type="Bip" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75"><path fill="#F9BE03" fill-rule="evenodd" d="M20,23.3227848 L25.6630224,23.3227848 L25.6630224,32.6600795 C26.8333804,31.2464651 27.7772174,30.5768583 29.7026451,30.5768583 C33.062705,30.5768583 35.1391466,33.8132911 35.1391466,38.9469432 C35.1391466,43.9317937 32.5719097,47.8006329 28.6455475,47.8006329 C27.0976547,47.8006329 26.1538177,46.9450242 25.2854876,46.0522152 L23.8131018,47.5402303 L20,47.5402303 L20,23.3227848 Z M25.67718,42.2589486 C26.0145394,42.7782993 26.4268676,43.0379747 27.1015865,43.0379747 C28.525993,43.0379747 29.3506494,41.4799225 29.3506494,39.0686512 C29.3506494,36.583187 28.6384461,35.2848101 27.3639771,35.2848101 C25.977055,35.2848101 25.67718,36.583187 25.67718,38.3267216 L25.67718,42.2589486 Z M36.9202226,31.1867089 L42.5974026,31.1867089 L42.5974026,47.4683544 L36.9202226,47.4683544 L36.9202226,31.1867089 Z M50.2563115,32.8215861 C51.1933491,31.4493431 52.4677203,30.5221519 54.4542402,30.5221519 C57.9400202,30.5221519 59.851577,34.1567415 59.851577,38.9039605 C59.851577,44.652546 56.665649,47.6937332 53.7420915,47.6937332 C52.3927573,47.6937332 51.3057937,47.1745061 50.5936451,46.3956655 L50.5936451,55 L45.0463822,55 L45.0463822,31.0784666 L49.8065334,31.0784666 L50.2563115,32.8215861 Z M50.6122449,42.2626582 C50.6864564,42.5580169 51.3543599,43.0379747 51.9480519,43.0379747 C53.5064935,43.0379747 54.0630798,41.1919831 54.0630798,39.1613924 C54.0630798,36.8723629 53.729128,35.2848101 52.2077922,35.2848101 C50.9090909,35.2848101 50.6122449,36.6508439 50.6122449,38.3491561 L50.6122449,42.2626582 Z M80,23.2651899 L70.5717576,42.2626582 L64.7495362,39.6653481 L72.1869545,20 L80,23.2651899 Z M36.8089054,25.8900805 C36.8089054,24.1227145 38.0862709,22.7689873 39.8520408,22.7689873 C41.5426716,22.7689873 42.8200371,24.1227145 42.8200371,25.8900805 C42.8200371,27.5822394 41.5426716,28.8607595 39.8520408,28.8607595 C38.0862709,28.8607595 36.8089054,27.5822394 36.8089054,25.8900805 Z M60.6307978,47.2280545 C60.6307978,44.7807512 62.4648589,43.0379747 64.9726568,43.0379747 C67.405595,43.0379747 69.2022263,44.7807512 69.2022263,47.2280545 C69.2022263,49.7865988 67.405595,51.5664557 64.9726568,51.5664557 C62.4648589,51.5664557 60.6307978,49.7865988 60.6307978,47.2280545 Z"/></svg>';
      var paseLogoSVG = '<svg data-type="Pase" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75"><path fill="#0A593E" fill-rule="evenodd" d="M40.7699449,28.9577195 L36.8878878,28.9577195 L36.8878878,48.0702979 C36.8878878,49.9388725 35.3731088,51.4536516 33.5045341,51.4536516 L33.5045341,51.4536516 C31.6359594,51.4536516 30.1211804,49.9388725 30.1211804,48.0702979 L30.1211804,28.9577195 L26.1976097,28.9577195 C24.6732432,28.9577195 23.4375,27.7219763 23.4375,26.1976097 L23.4375,26.1976097 C23.4375,24.6732432 24.6732432,23.4375 26.1976097,23.4375 L40.7699449,23.4375 C42.2943115,23.4375 43.5300547,24.6732432 43.5300547,26.1976097 L43.5300547,26.1976097 C43.5300547,27.7219763 42.2943115,28.9577195 40.7699449,28.9577195 Z M69.4765631,51.5625 L60.357027,51.5625 C60.0248315,51.5625 59.7290048,51.3523174 59.6196856,51.0386247 L52.179577,29.6891491 L52.0129612,29.6891491 L52.5539211,48.6270932 C52.598926,50.2026261 51.3581879,51.5163315 49.782655,51.5613364 C49.7554991,51.5621121 49.7283335,51.5625 49.7011665,51.5625 L49.7011665,51.5625 C48.0793248,51.5625 46.7645623,50.2477375 46.7645623,48.6258959 L46.7645623,24.3271808 C46.7645623,23.895939 47.1141529,23.5463484 47.5453947,23.5463484 L56.3321718,23.5463484 C56.6641365,23.5463484 56.9598106,23.7562436 57.0693061,24.0696304 L64.7174189,45.9592697 L64.8840347,45.9592697 L64.3427989,26.5442688 C64.2979113,24.9340763 65.5668416,23.5923687 67.1770341,23.5474811 C67.2041196,23.546726 67.2312143,23.5463484 67.2583104,23.5463484 L67.2583104,23.5463484 C68.9146593,23.5463484 70.2573955,24.8890845 70.2573955,26.5454335 L70.2573955,50.7816676 C70.2573955,51.2129094 69.9078049,51.5625 69.4765631,51.5625 Z M91.010643,51.4536516 L75.5121427,51.4536516 L75.5121427,23.4375 L90.9898903,23.4375 C92.5142568,23.4375 93.75,24.6732432 93.75,26.1976097 L93.75,26.1976097 C93.75,27.7219763 92.5142568,28.9577195 90.9898903,28.9577195 L82.1212745,28.9577195 L82.1212745,34.477939 L87.9297054,34.477939 C89.415402,34.477939 90.619797,35.682334 90.619797,37.1680306 C90.619797,37.2329391 90.6174478,37.2978264 90.6127539,37.362565 L90.6127539,37.362565 C90.4948747,38.9883737 89.1414825,40.247191 87.5114059,40.247191 L82.1212745,40.247191 L82.1212745,45.9749375 L91.010643,45.9749375 C92.5235481,45.9749375 93.75,47.2013894 93.75,48.7142945 L93.75,48.7142945 C93.75,50.2271997 92.5235481,51.4536516 91.010643,51.4536516 Z"/></svg>';
      var trencentralLogoSVG = '<svg data-type="TrenCentral" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75"><path fill="#FFF" d="M36.3406907,47.2188423 L33.3447854,47.2188423 L33.3447854,31.0664001 L27.2727273,31.0664001 L27.2727273,28.4069181 L42.3993743,28.4069181 L42.3993743,31.0664001 L36.3406907,31.0664001 L36.3406907,47.2188423 Z M42.8438217,47.2188423 L42.8438217,33.0219016 L45.6123592,33.0219016 L45.6123592,35.1990266 L45.8263525,35.1990266 C46.2409644,33.8041022 47.8592882,32.7872414 49.7584782,32.7872414 C50.1864647,32.7872414 50.7348224,32.8263515 51.0424377,32.9045715 L51.0424377,35.6683469 C50.8016953,35.5901269 49.9457223,35.4988702 49.4374884,35.4988702 C47.2574323,35.4988702 45.7193559,36.8416478 45.7193559,38.8362593 L45.7193559,47.2188423 L42.8438217,47.2188423 Z M58.3614179,35.1338432 C56.2348601,35.1338432 54.750282,36.593951 54.5897871,38.810186 L61.9458046,38.810186 C61.8789317,36.5809143 60.4879757,35.1338432 58.3614179,35.1338432 Z M61.93243,43.3860594 L64.7009675,43.3860594 C64.0456133,45.9282114 61.7184368,47.4926125 58.388167,47.4926125 C54.2152989,47.4926125 51.6607546,44.7027638 51.6607546,40.1660003 C51.6607546,35.6292369 54.2687972,32.7481314 58.3747924,32.7481314 C62.4272894,32.7481314 64.874837,35.4467234 64.874837,39.9052668 L64.874837,40.8830176 L54.5897871,40.8830176 L54.5897871,41.0394577 C54.6834091,43.5294629 56.1679872,45.1069007 58.4684145,45.1069007 C60.2071095,45.1069007 61.3974469,44.494177 61.93243,43.3860594 Z M67.2719728,47.2188423 L67.2719728,33.0219016 L70.0405103,33.0219016 L70.0405103,35.2772467 L70.2545035,35.2772467 C70.9633561,33.6998088 72.4078105,32.7481314 74.6012412,32.7481314 C77.8512635,32.7481314 79.6434569,34.6514862 79.6434569,38.0279854 L79.6434569,47.2188423 L76.7679227,47.2188423 L76.7679227,38.7319659 C76.7679227,36.4505475 75.7514548,35.3163567 73.624897,35.3163567 C71.4983392,35.3163567 70.1475069,36.6982444 70.1475069,38.9144794 L70.1475069,47.2188423 L67.2719728,47.2188423 Z M91.2423018,47.7272727 C85.4644844,47.7272727 81.9068468,43.9466365 81.9068468,37.8063619 C81.9068468,31.6660873 85.4511098,27.8984877 91.2423018,27.8984877 C96.0972734,27.8984877 99.7752822,31.0533635 99.9224025,35.3163567 L95.2011767,35.3163567 C94.9470598,33.2695985 93.3554851,31.8877108 91.2423018,31.8877108 C88.5540118,31.8877108 86.9089388,34.1300191 86.9089388,37.7933252 C86.9089388,41.469668 88.5540118,43.7380497 91.2556764,43.7380497 C93.3688596,43.7380497 94.9470598,42.4083087 95.2279259,40.3876238 L99.9357771,40.3876238 C99.7752822,44.6897271 96.1908955,47.7272727 91.2423018,47.7272727 Z M108.699212,35.6422736 C107.147761,35.6422736 106.06442,36.6982444 105.944049,38.3408656 L111.347378,38.3408656 C111.267131,36.6460977 110.277412,35.6422736 108.699212,35.6422736 Z M111.521248,42.9428124 L115.841236,42.9428124 C115.319627,45.7717712 112.591214,47.5577959 108.739335,47.5577959 C103.99136,47.5577959 101.262947,44.8200939 101.262947,40.0617069 C101.262947,35.2772467 104.058233,32.3700678 108.672463,32.3700678 C113.259943,32.3700678 115.934858,35.0816965 115.934858,39.7097167 L115.934858,40.987311 L105.9173,40.987311 L105.9173,41.2219711 C105.957423,43.1122892 107.067513,44.2855901 108.873081,44.2855901 C110.250663,44.2855901 111.200258,43.7901964 111.521248,42.9428124 Z M117.82376,47.2188423 L117.82376,32.7090214 L122.424614,32.7090214 L122.424614,35.0686598 L122.678731,35.0686598 C123.334086,33.4260386 124.885537,32.3700678 127.038844,32.3700678 C130.355739,32.3700678 132.081059,34.3646793 132.081059,37.8454719 L132.081059,47.2188423 L127.346459,47.2188423 L127.346459,38.8753694 C127.346459,37.115418 126.610857,36.1376673 125.005908,36.1376673 C123.467832,36.1376673 122.544986,37.2588215 122.544986,38.9275161 L122.544986,47.2188423 L117.82376,47.2188423 Z M135.762155,29.3846689 L140.48338,29.3846689 L140.48338,32.9045715 L143.479286,32.9045715 L143.479286,36.3332175 L140.48338,36.3332175 L140.48338,42.2127586 C140.48338,43.3078394 141.058487,43.8423431 142.288948,43.8423431 C142.837306,43.8423431 143.131547,43.8162698 143.479286,43.7771597 L143.479286,47.0624022 C142.984426,47.1666956 142.115079,47.2449157 141.218982,47.2449157 C137.300231,47.2449157 135.762155,46.0846515 135.762155,43.242656 L135.762155,36.3332175 L133.475102,36.3332175 L133.475102,32.9045715 L135.762155,32.9045715 L135.762155,29.3846689 Z M145.542057,47.2188423 L145.542057,32.7090214 L150.142912,32.7090214 L150.142912,35.0947332 L150.397029,35.0947332 C150.758142,33.6346254 152.202596,32.4873979 154.061663,32.4873979 C154.690268,32.4873979 155.42587,32.5656179 155.773609,32.7090214 L155.773609,36.633061 C155.412495,36.4896576 154.4629,36.3723275 153.740673,36.3723275 C151.654239,36.3723275 150.263283,37.519555 150.263283,39.5402399 L150.263283,47.2188423 L145.542057,47.2188423 Z M162.557606,44.2204067 C164.055558,44.2204067 165.219147,43.2556927 165.219147,42.0041717 L165.219147,41.0524944 L162.718101,41.2089345 C161.31377,41.3132279 160.578168,41.8477316 160.578168,42.7211889 C160.578168,43.646793 161.367268,44.2204067 162.557606,44.2204067 Z M160.832285,47.4404658 C157.970126,47.4404658 156.017437,45.7065879 156.017437,43.0471059 C156.017437,40.4006605 158.130621,38.8623327 161.969124,38.6407092 L165.219147,38.4581957 L165.219147,37.3240049 C165.219147,36.3462541 164.47017,35.7596037 163.159462,35.7596037 C161.915626,35.7596037 161.113151,36.1637407 160.805536,36.9329046 L156.552421,36.9329046 C156.766414,34.1169824 159.401206,32.3700678 163.426953,32.3700678 C167.532949,32.3700678 169.8735,34.1952025 169.8735,37.3240049 L169.8735,47.2188423 L165.272645,47.2188423 L165.272645,45.419781 L165.018528,45.419781 C164.349799,46.6582653 162.718101,47.4404658 160.832285,47.4404658 Z M172.551501,47.2188423 L172.551501,27.2727273 L177.272727,27.2727273 L177.272727,47.2188423 L172.551501,47.2188423 Z"/></svg>';
      var mervalLogoSVG = '<svg data-type="MerVal" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75"><path fill="#FFF" d="M22.7072011,33.2880435 L22.7072011,24.0404212 L24.4650136,24.0404212 L24.4650136,25.5264946 L24.6008832,25.5264946 C25.0084918,24.4819973 25.9425951,23.8620924 27.173913,23.8620924 C28.4391984,23.8620924 29.3138587,24.5159647 29.7214674,25.5264946 L29.8658288,25.5264946 C30.3328804,24.5159647 31.3943614,23.8620924 32.6766304,23.8620924 C34.544837,23.8620924 35.6317935,24.9915082 35.6317935,26.9191576 L35.6317935,33.2880435 L33.8060462,33.2880435 L33.8060462,27.3947011 C33.8060462,26.1463995 33.2116168,25.5349864 32.0142663,25.5349864 C30.8338995,25.5349864 30.0611413,26.3841712 30.0611413,27.4711277 L30.0611413,33.2880435 L28.2693614,33.2880435 L28.2693614,27.2163723 C28.2693614,26.171875 27.5730299,25.5349864 26.4860734,25.5349864 C25.3736413,25.5349864 24.5329484,26.4436141 24.5329484,27.6324728 L24.5329484,33.2880435 L22.7072011,33.2880435 Z M41.3232912,25.4161005 C39.9730874,25.4161005 39.0304923,26.3671875 38.9285901,27.8108016 L43.5991064,27.8108016 C43.5566472,26.3586957 42.673495,25.4161005 41.3232912,25.4161005 Z M43.5906146,30.7914402 L45.3484271,30.7914402 C44.9323265,32.4473505 43.454745,33.4663723 41.3402749,33.4663723 C38.6908184,33.4663723 37.0688754,31.6491168 37.0688754,28.6939538 C37.0688754,25.7387908 38.7247858,23.8620924 41.331783,23.8620924 C43.9048129,23.8620924 45.4588211,25.6199049 45.4588211,28.5241168 L45.4588211,29.1610054 L38.9285901,29.1610054 L38.9285901,29.2629076 C38.988033,30.8848505 39.9306282,31.9123641 41.391226,31.9123641 C42.4951662,31.9123641 43.2509407,31.5132473 43.5906146,30.7914402 Z M47.626202,21.7391304 L49.4519492,21.7391304 L49.4519492,24.0828804 L51.4560253,24.0828804 L51.4560253,25.6199049 L49.4519492,25.6199049 L49.4519492,30.3753397 C49.4519492,31.3434103 49.8510661,31.7680027 50.7596938,31.7680027 C51.0399248,31.7680027 51.2012699,31.751019 51.4560253,31.7255435 L51.4560253,33.2455842 C51.1588107,33.2965353 50.8191367,33.3389946 50.4624791,33.3389946 C48.4329275,33.3389946 47.626202,32.6256793 47.626202,30.8423913 L47.626202,25.6199049 L46.1571123,25.6199049 L46.1571123,24.0828804 L47.626202,24.0828804 L47.626202,21.7391304 Z M52.9355665,33.2880435 L52.9355665,24.0404212 L54.693379,24.0404212 L54.693379,25.4585598 L54.8292486,25.4585598 C55.0924959,24.5499321 56.1200095,23.8875679 57.3258518,23.8875679 C57.597591,23.8875679 57.9457567,23.9130435 58.1410692,23.9639946 L58.1410692,25.7642663 C57.988216,25.7133152 57.4447377,25.6538723 57.1220475,25.6538723 C55.7378763,25.6538723 54.7613138,26.5285326 54.7613138,27.8277853 L54.7613138,33.2880435 L52.9355665,33.2880435 Z M62.8984637,33.4663723 C60.1895642,33.4663723 58.5336539,31.6576087 58.5336539,28.6599864 C58.5336539,25.6793478 60.1980561,23.8620924 62.8984637,23.8620924 C65.5903795,23.8620924 67.2547816,25.6793478 67.2547816,28.6599864 C67.2547816,31.6576087 65.5988713,33.4663723 62.8984637,33.4663723 Z M62.8984637,31.8444293 C64.4779474,31.8444293 65.3780833,30.6725543 65.3780833,28.6599864 C65.3780833,26.6559103 64.4779474,25.4840353 62.8984637,25.4840353 C61.3104882,25.4840353 60.4188441,26.6559103 60.4188441,28.6599864 C60.4188441,30.6810462 61.3104882,31.8444293 62.8984637,31.8444293 Z M31.5387228,40.1409647 L28.3882473,49.5923913 L24.9235734,49.5923913 L21.7391304,40.1409647 L24.9745245,40.1409647 L26.6134511,46.9004755 L26.7747962,46.9004755 L28.3797554,40.1409647 L31.5387228,40.1409647 Z M35.7950983,47.6392663 C36.7461852,47.6392663 37.484976,47.0108696 37.484976,46.1956522 L37.484976,45.5757473 L35.8970004,45.6776495 C35.0053564,45.7455842 34.5383048,46.09375 34.5383048,46.6627038 C34.5383048,47.265625 35.0393238,47.6392663 35.7950983,47.6392663 Z M34.6996499,49.7367527 C32.8823945,49.7367527 31.6425847,48.607337 31.6425847,46.875 C31.6425847,45.1511549 32.9842966,44.1491168 35.421457,44.0047554 L37.484976,43.8858696 L37.484976,43.1470788 C37.484976,42.5101902 37.0094325,42.1280571 36.1772314,42.1280571 C35.3874896,42.1280571 34.8779787,42.3913043 34.6826662,42.8923234 L31.9822586,42.8923234 C32.1181282,41.0580842 33.7910222,39.9201766 36.3470684,39.9201766 C38.9540657,39.9201766 40.440139,41.1090353 40.440139,43.1470788 L40.440139,49.5923913 L37.5189434,49.5923913 L37.5189434,48.4205163 L37.3575983,48.4205163 C36.9330059,49.2272418 35.8970004,49.7367527 34.6996499,49.7367527 Z M42.1404683,49.5923913 L42.1404683,36.5998641 L45.1380905,36.5998641 L45.1380905,49.5923913 L42.1404683,49.5923913 Z M52.799697,39.9966033 C55.1859062,39.9966033 56.6040448,41.7713995 56.6040448,44.8624321 C56.6040448,47.9449728 55.2198736,49.7367527 52.8676317,49.7367527 C51.5004442,49.7367527 50.4984062,49.1423234 50.0568301,48.1402853 L49.895485,48.1402853 L49.895485,52.7173913 L46.8978627,52.7173913 L46.8978627,40.1409647 L49.8190584,40.1409647 L49.8190584,41.6779891 L49.9804035,41.6779891 C50.4474551,40.625 51.4919524,39.9966033 52.799697,39.9966033 Z M51.7042486,47.376019 C52.850648,47.376019 53.521504,46.4334239 53.521504,44.8624321 C53.521504,43.3084239 52.8421562,42.357337 51.7042486,42.357337 C50.5748328,42.357337 49.8785013,43.3084239 49.8785013,44.8709239 C49.8785013,46.4419158 50.566341,47.376019 51.7042486,47.376019 Z M61.4803251,47.6392663 C62.4314121,47.6392663 63.1702028,47.0108696 63.1702028,46.1956522 L63.1702028,45.5757473 L61.5822273,45.6776495 C60.6905833,45.7455842 60.2235316,46.09375 60.2235316,46.6627038 C60.2235316,47.265625 60.7245507,47.6392663 61.4803251,47.6392663 Z M60.3848767,49.7367527 C58.5676213,49.7367527 57.3278115,48.607337 57.3278115,46.875 C57.3278115,45.1511549 58.6695235,44.1491168 61.1066838,44.0047554 L63.1702028,43.8858696 L63.1702028,43.1470788 C63.1702028,42.5101902 62.6946593,42.1280571 61.8624583,42.1280571 C61.0727164,42.1280571 60.5632055,42.3913043 60.367893,42.8923234 L57.6674854,42.8923234 C57.803355,41.0580842 59.476249,39.9201766 62.0322952,39.9201766 C64.6392925,39.9201766 66.1253659,41.1090353 66.1253659,43.1470788 L66.1253659,49.5923913 L63.2041702,49.5923913 L63.2041702,48.4205163 L63.0428251,48.4205163 C62.6182327,49.2272418 61.5822273,49.7367527 60.3848767,49.7367527 Z M67.7407766,49.5923913 L67.7407766,40.1409647 L70.6619723,40.1409647 L70.6619723,41.6949728 L70.8233174,41.6949728 C71.0525973,40.7438859 71.9697168,39.9966033 73.1500837,39.9966033 C73.5492005,39.9966033 74.0162522,40.0475543 74.2370402,40.1409647 L74.2370402,42.6970109 C74.0077603,42.6036005 73.4048391,42.5271739 72.9462793,42.5271739 C71.6215511,42.5271739 70.7383989,43.2744565 70.7383989,44.5906929 L70.7383989,49.5923913 L67.7407766,49.5923913 Z M78.5443667,47.6392663 C79.4954537,47.6392663 80.2342445,47.0108696 80.2342445,46.1956522 L80.2342445,45.5757473 L78.6462689,45.6776495 C77.7546249,45.7455842 77.2875733,46.09375 77.2875733,46.6627038 C77.2875733,47.265625 77.7885923,47.6392663 78.5443667,47.6392663 Z M77.4489184,49.7367527 C75.6316629,49.7367527 74.3918532,48.607337 74.3918532,46.875 C74.3918532,45.1511549 75.7335651,44.1491168 78.1707254,44.0047554 L80.2342445,43.8858696 L80.2342445,43.1470788 C80.2342445,42.5101902 79.758701,42.1280571 78.9264999,42.1280571 C78.136758,42.1280571 77.6272472,42.3913043 77.4319347,42.8923234 L74.7315271,42.8923234 C74.8673966,41.0580842 76.5402907,39.9201766 79.0963368,39.9201766 C81.7033341,39.9201766 83.1894075,41.1090353 83.1894075,43.1470788 L83.1894075,49.5923913 L80.2682118,49.5923913 L80.2682118,48.4205163 L80.1068667,48.4205163 C79.6822743,49.2272418 78.6462689,49.7367527 77.4489184,49.7367527 Z M84.8048183,49.5923913 L84.8048183,40.1409647 L87.8109324,40.1409647 L87.8109324,49.5923913 L84.8048183,49.5923913 Z M87.4372911,38.6548913 L84.8133101,38.6548913 L86.8938128,35.6063179 L89.9169107,35.6063179 L87.4372911,38.6548913 Z M89.2819817,42.9857337 C89.2819817,41.1090353 90.886941,39.9201766 93.4344953,39.9201766 C96.0499845,39.9201766 97.4851067,40.9307065 97.5955008,42.8328804 L94.8611258,42.8328804 C94.7762073,42.2809103 94.2751883,41.9497283 93.4599709,41.9497283 C92.6787209,41.9497283 92.1352426,42.2894022 92.1352426,42.798913 C92.1352426,43.1980299 92.4749165,43.4358016 93.2221991,43.5971467 L95.1753241,43.9962636 C97.0350388,44.3868886 97.8417643,45.1596467 97.8417643,46.594769 C97.8417643,48.5563859 96.1179192,49.8131793 93.4769546,49.8131793 C90.7680551,49.8131793 89.2225388,48.7856658 89.0527018,46.8834918 L91.948422,46.8834918 C92.1012752,47.4694293 92.6362616,47.7836277 93.5194138,47.7836277 C94.343123,47.7836277 94.8781095,47.4524457 94.8781095,46.9429348 C94.8781095,46.5438179 94.5978785,46.3315217 93.842104,46.1701766 L92.0842915,45.7965353 C90.2075932,45.3974185 89.2819817,44.4718071 89.2819817,42.9857337 Z M103.414376,49.8131793 C100.391278,49.8131793 98.5994985,47.9704484 98.5994985,44.8624321 C98.5994985,41.8053668 100.442229,39.9201766 103.414376,39.9201766 C106.403507,39.9201766 108.229254,41.7883832 108.229254,44.8624321 C108.229254,47.9789402 106.445966,49.8131793 103.414376,49.8131793 Z M103.414376,47.5203804 C104.518316,47.5203804 105.146713,46.5438179 105.146713,44.8624321 C105.146713,43.2150136 104.501333,42.2129755 103.414376,42.2129755 C102.32742,42.2129755 101.682039,43.2150136 101.682039,44.8624321 C101.682039,46.5523098 102.310436,47.5203804 103.414376,47.5203804 Z"/></svg>';
      var biotrenLogoSVG = '<svg data-type="BioTren" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75"><path fill="#FFF" d="M35.1695668,47.8204901 L27.2727273,47.8204901 L27.2727273,28.6044034 L34.9964489,28.6044034 C38.6052912,28.6044034 40.7759233,30.4421165 40.7759233,33.3984375 C40.7759233,35.4092685 39.2977628,37.2070312 37.4067827,37.5266335 L37.4067827,37.7530185 C40.0035511,38.0193537 41.7347301,39.8703835 41.7347301,42.3739347 C41.7347301,45.756392 39.2711293,47.8204901 35.1695668,47.8204901 Z M30.2556818,31.1345881 L30.2556818,36.7409446 L33.7979403,36.7409446 C36.4346591,36.7409446 37.8062855,35.768821 37.8062855,33.9444247 C37.8062855,32.1732955 36.5145597,31.1345881 34.3039773,31.1345881 L30.2556818,31.1345881 Z M30.2556818,45.2903054 L34.5703125,45.2903054 C37.2602983,45.2903054 38.6851918,44.198331 38.6851918,42.1608665 C38.6851918,40.1500355 37.2070312,39.0980114 34.3971946,39.0980114 L30.2556818,39.0980114 L30.2556818,45.2903054 Z M44.2280375,47.8204901 L44.2280375,33.3185369 L47.0778245,33.3185369 L47.0778245,47.8204901 L44.2280375,47.8204901 Z M45.652931,30.7750355 C44.5875901,30.7750355 43.8019012,30.0159801 43.8019012,29.0305398 C43.8019012,28.0317827 44.5875901,27.2727273 45.652931,27.2727273 C46.7182719,27.2727273 47.5039608,28.0317827 47.5039608,29.0305398 C47.5039608,30.0159801 46.7182719,30.7750355 45.652931,30.7750355 Z M56.3626802,48.100142 C52.1146333,48.100142 49.5178649,45.2636719 49.5178649,40.5628551 C49.5178649,35.8886719 52.1279501,33.0388849 56.3626802,33.0388849 C60.5840936,33.0388849 63.1941788,35.8886719 63.1941788,40.5628551 C63.1941788,45.2636719 60.5974103,48.100142 56.3626802,48.100142 Z M56.3626802,45.5566406 C58.8395978,45.5566406 60.2511745,43.7189276 60.2511745,40.5628551 C60.2511745,37.4200994 58.8395978,35.5823864 56.3626802,35.5823864 C53.8724458,35.5823864 52.4741859,37.4200994 52.4741859,40.5628551 C52.4741859,43.7322443 53.8724458,45.5566406 56.3626802,45.5566406 Z M75.12907,47.8204901 L70.2551354,47.8204901 L70.2551354,32.532848 L64.7153626,32.532848 L64.7153626,28.6044034 L80.6821595,28.6044034 L80.6821595,32.532848 L75.12907,32.532848 L75.12907,47.8204901 Z M81.3910209,47.8204901 L81.3910209,32.9989347 L85.9719868,32.9989347 L85.9719868,35.435902 L86.2250053,35.435902 C86.5845579,33.9444247 88.0227681,32.7725497 89.8737979,32.7725497 C90.4996857,32.7725497 91.2321076,32.8524503 91.5783434,32.9989347 L91.5783434,37.0072798 C91.2187908,36.8607955 90.2733007,36.7409446 89.5541956,36.7409446 C87.4767809,36.7409446 86.0918377,37.9128196 86.0918377,39.9769176 L86.0918377,47.8204901 L81.3910209,47.8204901 Z M99.3717218,35.995206 C97.8269775,35.995206 96.7483198,37.0738636 96.628469,38.7517756 L102.008441,38.7517756 C101.92854,37.0205966 100.9431,35.995206 99.3717218,35.995206 Z M102.181558,43.4525923 L106.482872,43.4525923 C105.963519,46.3423295 103.246899,48.1667259 99.4116721,48.1667259 C94.6842218,48.1667259 91.9676025,45.370206 91.9676025,40.5095881 C91.9676025,35.6223366 94.7508056,32.6526989 99.3450883,32.6526989 C103.912737,32.6526989 106.57609,35.4225852 106.57609,40.1500355 L106.57609,41.4550781 L96.6018355,41.4550781 L96.6018355,41.6947798 C96.6417857,43.6257102 97.7470769,44.8242188 99.5448397,44.8242188 C100.916466,44.8242188 101.861956,44.3181818 102.181558,43.4525923 Z M108.456826,47.8204901 L108.456826,32.9989347 L113.037792,32.9989347 L113.037792,35.4092685 L113.29081,35.4092685 C113.943332,33.7313565 115.488076,32.6526989 117.632075,32.6526989 C120.934632,32.6526989 122.652494,34.6901634 122.652494,38.2457386 L122.652494,47.8204901 L117.93836,47.8204901 L117.93836,39.2977628 C117.93836,37.5 117.205938,36.5012429 115.607927,36.5012429 C114.076499,36.5012429 113.157643,37.6464844 113.157643,39.3510298 L113.157643,47.8204901 L108.456826,47.8204901 Z"/></svg>';

      data.savedCards.forEach(function(element) {
        if (element.status == "ok") {
          $(".saved-cards").append(
            '<button data-type="' + element.type + '" data-num="' + element.num + '" class="saved-card card-selector" ontouchstart="setCurrentCard(\'' + element.type + '\', \'' + element.num + '\');"><figure class="small-card"><div class="card ' + element.type.toLowerCase() + '"><div class="card-logo">' + eval(element.type.toLowerCase() + "LogoSVG") + '</div></div></figure><div class="card-info"><span>' + element.type + '</span><p class="txt-gray"><span class="saldo">' + element.saldo + '</span> | ' + element.num.replace(/\d(?=\d{3})/g, "•") + '</p><p class="txt-red errorText">Error al consultar la tarjeta.</p></div></button>'
          );
        } else if (element.status == "error") {
          $(".saved-cards").append(
            '<button data-type="' + element.type + '" data-num="' + element.num + '" class="saved-card card-selector error" ontouchstart="setCurrentCard(\'' + element.type + '\', \'' + element.num + '\');"><figure class="small-card"><div class="card ' + element.type.toLowerCase() + '"><div class="card-logo">' + eval(element.type.toLowerCase() + "LogoSVG") + '</div></div></figure><div class="card-info"><span>' + element.type + '</span><p class="txt-gray"><span class="saldo">' + element.saldo + '</span> | ' + element.num.replace(/\d(?=\d{3})/g, "•") + '</p><p class="txt-red errorText">Error al consultar la tarjeta.</p></div></button>'
          );
        }
      });
    }
  }

  function cardLoading(evt) {
    if (evt == "start") {
      $("main").addClass("loading");
    } else if (evt == "stop") {
      $("main").removeClass("loading");
    }
  }

  function selectThisCard(type) {
    $("#addCard .card-options .card-selector").removeClass("selected");
    $("#addCard .card-options .card-selector[data-type='" + type + "']").addClass("selected");
    newCardType = type;
  }

  function addCard(type, num) {
    if (type == null) {

      var letras=/\D/gi;
      var numeros=/[\d\s]+/gi;

      if ($("#transitCard").val().match(letras)) {
        $("#transitCard").removeClass("shake");
        setTimeout(function(){
          $("#transitCard").addClass("shake");
          TapticEngine.notification({
            type: "error" // success | warning | error
          });
        }, 10);
      } else if ($("#transitCard").val().match(numeros)) {

        // Everything cool bro :)
        newCardNum = $("#transitCard").val();
        $("#transitCard").val("");

        if (data['savedCards'].find(obj => (obj.num === newCardNum && obj.type === newCardType)) == undefined) {
          // Todo bien.
          data['savedCards'].push({type: newCardType, num: newCardNum, saldo: "···", leftTrips: "···", status: "ok"});
          localStorage.setItem('data', JSON.stringify(data));
        } else if ((data['savedCards'].find(obj => (obj.num === newCardNum && obj.type === newCardType)).type == newCardType) && (data['savedCards'].find(obj => (obj.num === newCardNum && obj.type === newCardType)).num == newCardNum)) {
          // La tarjeta ya existe.
        }

        getSavedCards();
        setCurrentCard(newCardType, newCardNum);
        getSaldo();
        // Para que al volver a agregar una tarjeta no quede marcada la última que se agregó.
        selectThisCard('Bip');

      } else {
        $("#transitCard").removeClass("shake");
        setTimeout(function(){
          $("#transitCard").addClass("shake");
          TapticEngine.notification({
            type: "error" // success | warning | error
          });
        }, 10);
      }

    } else {
      data['savedCards'].push({type: type, num: num, saldo: "···", leftTrips: "···", status: "ok"});
      localStorage.setItem('data', JSON.stringify(data));
      getSavedCards();
      setCurrentCard(type, num);
      getSaldo();
      // Para que al volver a agregar una tarjeta no quede marcada la última que se agregó.
      selectThisCard('Bip');
    }
  }

  function deleteCard(type, num) {
    if (type == null) {
      data['savedCards'].splice((data['savedCards'].findIndex(obj => (obj.num === $("main").attr("data-num") && obj.type === $("main").attr("data-type")))), 1);
      localStorage.setItem('data', JSON.stringify(data));
      getSavedCards();
      if (data.savedCards.length == 0) { } else {
        setCurrentCard(data['savedCards'][0].type, data['savedCards'][0].num);
        getSaldo();
      }
    } else {
      data['savedCards'].splice((data['savedCards'].findIndex(obj => (obj.num === num && obj.type === type))), 1);
      localStorage.setItem('data', JSON.stringify(data));
      getSavedCards();
      setCurrentCard(data['savedCards'][0].type, data['savedCards'][0].num);
      getSaldo();
    }
  }

  function getSaldo() {

    cardLoading('start');
    getTarifa();
    document.activeElement.blur();

    ctr = 0;
    data.savedCards.forEach(function(element, index, array) {
      var currentCard = element.type.toLowerCase();
      var currentCardNoLowerCase = element.type;
      if (currentCard == "bip") {
        var APIUrl = "https://api.adderou.cl/bip/new.php?n=";
        var tarifa = tarifaBip;
      } else if (currentCard == "pase") {
        var APIUrl = "https://api.adderou.cl/bip/new.php?n=";
        var tarifa = tarifaPase;
      } else if (currentCard == "trencentral") {
        var APIUrl = "https://saldo.red/api/trencentral/?tarjeta=";
        var tarifa = 0;
      } else if (currentCard == "merval") {
        var APIUrl = "https://saldo.red/api/merval/?tarjeta=";
        var tarifa = 0;
      } else if (currentCard == "biotren") {
        var APIUrl = "https://saldo.red/api/biotren/?tarjeta=";
        var tarifa = 0;
      };

      $.ajax({
        "async": true,
        "crossDomain": true,
        // API
        "url": APIUrl + element.num
      }).done(function (response) {

        var rawSaldo = response.saldo;
        var APISaldo = '$' + response.saldo;
        var APISaldoWithDots = APISaldo.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1.");

        ctr++;
        if (ctr === array.length) {
          // Terminaron de cargar todos los saldos.
        }

        if (response.saldo == undefined || response.saldo == null || response.saldo === "") {
          // Error :(
          element.status = "error";
          $(".saved-cards .card-selector[data-type='" + currentCardNoLowerCase + "'][data-num='" + element.num + "']").addClass("error");
          // Si esta tarjeta es la "lastCardUsed", actualiza sus parámetros en la data.
          if (currentCard == data['lastCard'][0].type.toLowerCase() && element.num == data['lastCard'][0].num) {
            $("main[data-type='" + currentCardNoLowerCase + "'][data-num='" + element.num + "']").addClass("error");
            cardLoading('stop');
            TapticEngine.notification({
              type: "error" // success | warning | error
            });
            data['lastCard'][0].saldo = "···";
            data['lastCard'][0].leftTrips = "···";
            localStorage.setItem('data', JSON.stringify(data));
          } else {}
        } else {
          element.saldo = APISaldoWithDots;

          if (rawSaldo >= 0) {
            element.leftTrips = Math.floor(rawSaldo / tarifa);
          } else {
            element.leftTrips = 0;
          };

          element.status = "ok";

          $('*[data-type="' + currentCardNoLowerCase + '"][data-num="' + element.num + '"] .saldo').html(element.saldo);
          $('*[data-type="' + currentCardNoLowerCase + '"][data-num="' + element.num + '"] .leftTrips').html(element.leftTrips);

          // Si esta tarjeta es la "lastCardUsed", actualiza sus parámetros en la data.
          if (currentCard == data['lastCard'][0].type.toLowerCase() && element.num == data['lastCard'][0].num) {
            cardLoading('stop');
            TapticEngine.notification({
              type: "success" // success | warning | error
            });
            data['lastCard'][0].saldo = element.saldo;
            data['lastCard'][0].leftTrips = element.leftTrips;
            localStorage.setItem('data', JSON.stringify(data));
          } else {}
        }

      });
    });
  }

  function transferOldCard(type, num) {
    if (type == "bip" || type == "Bip") {
      addCard('Bip', num);
      localStorage.removeItem('savedCardType');
      localStorage.removeItem('savedCardNum');
    } else if (type == "pase" || type == "Pase") {
      addCard('Pase', num);
      localStorage.removeItem('savedCardType');
      localStorage.removeItem('savedCardNum');
    } else if (type == "trencentral" || type == "TrenCentral") {
      addCard('TrenCentral', num);
      localStorage.removeItem('savedCardType');
      localStorage.removeItem('savedCardNum');
    } else if (type == "merval" || type == "MerVal") {
      addCard('MerVal', num);
      localStorage.removeItem('savedCardType');
      localStorage.removeItem('savedCardNum');
    } else if (type == "biotren" || type == "BioTren") {
      addCard('BioTren', num);
      localStorage.removeItem('savedCardType');
      localStorage.removeItem('savedCardNum');
    } else {
    }
  }

  function addMoney(amount) {
    openMenu('addMoney');
    $("iframe#tbk").attr("src","cargadirecta.html?tarjeta=" + $("main").attr("data-num") + "&email=jjjj@jjj.jjj&monto=" + amount);
  }

  function checkiFrame() {
    var iframe = document.getElementById("tbk");
    var iframeURL = iframe.contentWindow.location.href;
    console.log(iframeURL);
    if (iframeURL.match(/(https:\/\/cargatubip\.metro\.cl\/CargaTuBipRest\/falloCarga\.xhtml).*/gi)) {
      closeMenu('addMoney');
    } else if (iframeURL.match(/(https:\/\/webpay3g\.transbank\.cl\/webpayserver\/auth_emisor\.cgi).*/gi)) {
      var formUrl = iframe.contentDocument.getElementById("paso").action
      var formToken = iframe.contentDocument.getElementsByName("token_ws")[0].value
      console.log(formUrl)
      console.log(formToken)
      iframe.contentWindow.location.href = "about:blank" // cancelamos la carga de la pagina luego de conseguir los valores importantes (para evitar que desaparezcan)
      closeMenu('addMoney') // cerramos este menú

      // Acá hacemos la llamada ajax
      console.log("haciendo llamada ajax...")
      $.ajax({
        "async": true,
        "crossDomain": true,
        "type": "post",
        "url": formUrl,
        "data": "token_ws=" + formToken,
        "headers": {
          'Content-Type': 'application/x-www-form-urlencoded'
        }
      }).done(function (response) {
        console.log(response)
        var responseHTML = $.parseHTML(response);
        console.log(responseHTML)
        var txData = JSON.parse(responseHTML[3].textContent.trim())
        // json tiene los datos de respuesta de haber hecho el pago. Acá puedes hacer lo que quieras con ellos! (como mandarlos a una función que los muestre en un modal)
        console.log(txData);
      });
    } else {
      // Nothing, yet.
    }
  }

  $(document).ready(function() {

    $('a[target=_blank]').on('click', function(e) {
      e.preventDefault();
      window.open($(this).attr('href'), '_system');
      return false;
    });

    if (localStorage.getItem('data') == null && localStorage.getItem('savedCardType') == null) {
      localStorage.setItem('data', JSON.stringify(data));
    } else if (localStorage.getItem('data') == null && localStorage.getItem('savedCardType') !== null) {
      transferOldCard(localStorage.getItem('savedCardType'), localStorage.getItem('savedCardNum'));
    } else {
      data = JSON.parse(localStorage.getItem('data'));
    }

    // Por defecto, si la persona no especifica un tipo de tarjeta a agregar, se asume que es una Bip.
    selectThisCard('Bip');

    if (data.savedCards.length == 0) {
      // No hay tarjetas guardadas
      getSavedCards();
      localStorage.removeItem('data');
    } else {
      getSavedCards();
      getLastCardUsed();
      getSaldo();
    }

    $("input[type=text]").bind("touchstart", function(e) {
      $("input[type=text]").focus();
      e.stopPropagation();
      e.preventDefault();
      return false;
    });

    // Esto para que los clicks en los Menús no los cierren – como sí lo hacen los clicks en cualquier otra parte del overlay.
    $(".menu, .overlay-menus").bind("touchstart", function(e) {
      e.stopPropagation();
      e.preventDefault();
      return false;
    });

    // Actualiza la tarifa cada 1 minuto.
    setInterval(function() {
      getTarifa();
    }, 60 * 1000); // 60 * 1000 milsec

  });

  </script>
</head>
<body>
  <div class="app">

    <div class="content-wrapper">

      <div class="overlay-menus" ontouchstart="closeMenu();">
        <div class="menu" id="addCard">
          <div class="header">
            <h3>Agregar Tarjeta</h3>
            <button class="close" ontouchend="closeMenu('addCard');"><span class="icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                <path fill="#A2A2A2" d="M345,434 C350.53,434 355,438.47 355,444 C355,449.53 350.53,454 345,454 C339.47,454 335,449.53 335,444 C335,438.47 339.47,434 345,434 L345,434 Z M348.59,439 L345,442.59 L341.41,439 L340,440.41 L343.59,444 L340,447.59 L341.41,449 L345,445.41 L348.59,449 L350,447.59 L346.41,444 L350,440.41 L348.59,439 Z" transform="translate(-335 -434)"></path>
              </svg></span></button>
            </div>

            <label for="card-options" class="txt-black" style="margin-top: 20px;">Tipo de tarjeta</label>
            <div class="card-options" id="card-options">
              <button data-type="Bip" ontouchend="selectThisCard('Bip');" class="card-selector selected">
                <figure class="small-card">
                  <div class="card bip">
                    <div class="card-logo">
                      <svg data-type="Bip" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75"><path fill="#F9BE03" fill-rule="evenodd" d="M20,23.3227848 L25.6630224,23.3227848 L25.6630224,32.6600795 C26.8333804,31.2464651 27.7772174,30.5768583 29.7026451,30.5768583 C33.062705,30.5768583 35.1391466,33.8132911 35.1391466,38.9469432 C35.1391466,43.9317937 32.5719097,47.8006329 28.6455475,47.8006329 C27.0976547,47.8006329 26.1538177,46.9450242 25.2854876,46.0522152 L23.8131018,47.5402303 L20,47.5402303 L20,23.3227848 Z M25.67718,42.2589486 C26.0145394,42.7782993 26.4268676,43.0379747 27.1015865,43.0379747 C28.525993,43.0379747 29.3506494,41.4799225 29.3506494,39.0686512 C29.3506494,36.583187 28.6384461,35.2848101 27.3639771,35.2848101 C25.977055,35.2848101 25.67718,36.583187 25.67718,38.3267216 L25.67718,42.2589486 Z M36.9202226,31.1867089 L42.5974026,31.1867089 L42.5974026,47.4683544 L36.9202226,47.4683544 L36.9202226,31.1867089 Z M50.2563115,32.8215861 C51.1933491,31.4493431 52.4677203,30.5221519 54.4542402,30.5221519 C57.9400202,30.5221519 59.851577,34.1567415 59.851577,38.9039605 C59.851577,44.652546 56.665649,47.6937332 53.7420915,47.6937332 C52.3927573,47.6937332 51.3057937,47.1745061 50.5936451,46.3956655 L50.5936451,55 L45.0463822,55 L45.0463822,31.0784666 L49.8065334,31.0784666 L50.2563115,32.8215861 Z M50.6122449,42.2626582 C50.6864564,42.5580169 51.3543599,43.0379747 51.9480519,43.0379747 C53.5064935,43.0379747 54.0630798,41.1919831 54.0630798,39.1613924 C54.0630798,36.8723629 53.729128,35.2848101 52.2077922,35.2848101 C50.9090909,35.2848101 50.6122449,36.6508439 50.6122449,38.3491561 L50.6122449,42.2626582 Z M80,23.2651899 L70.5717576,42.2626582 L64.7495362,39.6653481 L72.1869545,20 L80,23.2651899 Z M36.8089054,25.8900805 C36.8089054,24.1227145 38.0862709,22.7689873 39.8520408,22.7689873 C41.5426716,22.7689873 42.8200371,24.1227145 42.8200371,25.8900805 C42.8200371,27.5822394 41.5426716,28.8607595 39.8520408,28.8607595 C38.0862709,28.8607595 36.8089054,27.5822394 36.8089054,25.8900805 Z M60.6307978,47.2280545 C60.6307978,44.7807512 62.4648589,43.0379747 64.9726568,43.0379747 C67.405595,43.0379747 69.2022263,44.7807512 69.2022263,47.2280545 C69.2022263,49.7865988 67.405595,51.5664557 64.9726568,51.5664557 C62.4648589,51.5664557 60.6307978,49.7865988 60.6307978,47.2280545 Z"/></svg>
                    </div>
                  </div>
                </figure>Bip
              </button>
              <button data-type="Pase" ontouchend="selectThisCard('Pase');" class="card-selector">
                <figure class="small-card">
                  <div class="card pase">
                    <div class="card-logo">
                      <svg data-type="Pase" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75">
                        <path fill="#0A593E" fill-rule="evenodd" d="M40.7699449,28.9577195 L36.8878878,28.9577195 L36.8878878,48.0702979 C36.8878878,49.9388725 35.3731088,51.4536516 33.5045341,51.4536516 L33.5045341,51.4536516 C31.6359594,51.4536516 30.1211804,49.9388725 30.1211804,48.0702979 L30.1211804,28.9577195 L26.1976097,28.9577195 C24.6732432,28.9577195 23.4375,27.7219763 23.4375,26.1976097 L23.4375,26.1976097 C23.4375,24.6732432 24.6732432,23.4375 26.1976097,23.4375 L40.7699449,23.4375 C42.2943115,23.4375 43.5300547,24.6732432 43.5300547,26.1976097 L43.5300547,26.1976097 C43.5300547,27.7219763 42.2943115,28.9577195 40.7699449,28.9577195 Z M69.4765631,51.5625 L60.357027,51.5625 C60.0248315,51.5625 59.7290048,51.3523174 59.6196856,51.0386247 L52.179577,29.6891491 L52.0129612,29.6891491 L52.5539211,48.6270932 C52.598926,50.2026261 51.3581879,51.5163315 49.782655,51.5613364 C49.7554991,51.5621121 49.7283335,51.5625 49.7011665,51.5625 L49.7011665,51.5625 C48.0793248,51.5625 46.7645623,50.2477375 46.7645623,48.6258959 L46.7645623,24.3271808 C46.7645623,23.895939 47.1141529,23.5463484 47.5453947,23.5463484 L56.3321718,23.5463484 C56.6641365,23.5463484 56.9598106,23.7562436 57.0693061,24.0696304 L64.7174189,45.9592697 L64.8840347,45.9592697 L64.3427989,26.5442688 C64.2979113,24.9340763 65.5668416,23.5923687 67.1770341,23.5474811 C67.2041196,23.546726 67.2312143,23.5463484 67.2583104,23.5463484 L67.2583104,23.5463484 C68.9146593,23.5463484 70.2573955,24.8890845 70.2573955,26.5454335 L70.2573955,50.7816676 C70.2573955,51.2129094 69.9078049,51.5625 69.4765631,51.5625 Z M91.010643,51.4536516 L75.5121427,51.4536516 L75.5121427,23.4375 L90.9898903,23.4375 C92.5142568,23.4375 93.75,24.6732432 93.75,26.1976097 L93.75,26.1976097 C93.75,27.7219763 92.5142568,28.9577195 90.9898903,28.9577195 L82.1212745,28.9577195 L82.1212745,34.477939 L87.9297054,34.477939 C89.415402,34.477939 90.619797,35.682334 90.619797,37.1680306 C90.619797,37.2329391 90.6174478,37.2978264 90.6127539,37.362565 L90.6127539,37.362565 C90.4948747,38.9883737 89.1414825,40.247191 87.5114059,40.247191 L82.1212745,40.247191 L82.1212745,45.9749375 L91.010643,45.9749375 C92.5235481,45.9749375 93.75,47.2013894 93.75,48.7142945 L93.75,48.7142945 C93.75,50.2271997 92.5235481,51.4536516 91.010643,51.4536516 Z"/>
                      </svg>
                    </div>
                  </div>
                </figure>Pase
              </button>
              <button data-type="TrenCentral" ontouchend="selectThisCard('TrenCentral');" class="card-selector">
                <figure class="small-card">
                  <div class="card trencentral">
                    <div class="card-logo">
                      <svg data-type="TrenCentral" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75">
                        <path fill="#FFF" d="M36.3406907,47.2188423 L33.3447854,47.2188423 L33.3447854,31.0664001 L27.2727273,31.0664001 L27.2727273,28.4069181 L42.3993743,28.4069181 L42.3993743,31.0664001 L36.3406907,31.0664001 L36.3406907,47.2188423 Z M42.8438217,47.2188423 L42.8438217,33.0219016 L45.6123592,33.0219016 L45.6123592,35.1990266 L45.8263525,35.1990266 C46.2409644,33.8041022 47.8592882,32.7872414 49.7584782,32.7872414 C50.1864647,32.7872414 50.7348224,32.8263515 51.0424377,32.9045715 L51.0424377,35.6683469 C50.8016953,35.5901269 49.9457223,35.4988702 49.4374884,35.4988702 C47.2574323,35.4988702 45.7193559,36.8416478 45.7193559,38.8362593 L45.7193559,47.2188423 L42.8438217,47.2188423 Z M58.3614179,35.1338432 C56.2348601,35.1338432 54.750282,36.593951 54.5897871,38.810186 L61.9458046,38.810186 C61.8789317,36.5809143 60.4879757,35.1338432 58.3614179,35.1338432 Z M61.93243,43.3860594 L64.7009675,43.3860594 C64.0456133,45.9282114 61.7184368,47.4926125 58.388167,47.4926125 C54.2152989,47.4926125 51.6607546,44.7027638 51.6607546,40.1660003 C51.6607546,35.6292369 54.2687972,32.7481314 58.3747924,32.7481314 C62.4272894,32.7481314 64.874837,35.4467234 64.874837,39.9052668 L64.874837,40.8830176 L54.5897871,40.8830176 L54.5897871,41.0394577 C54.6834091,43.5294629 56.1679872,45.1069007 58.4684145,45.1069007 C60.2071095,45.1069007 61.3974469,44.494177 61.93243,43.3860594 Z M67.2719728,47.2188423 L67.2719728,33.0219016 L70.0405103,33.0219016 L70.0405103,35.2772467 L70.2545035,35.2772467 C70.9633561,33.6998088 72.4078105,32.7481314 74.6012412,32.7481314 C77.8512635,32.7481314 79.6434569,34.6514862 79.6434569,38.0279854 L79.6434569,47.2188423 L76.7679227,47.2188423 L76.7679227,38.7319659 C76.7679227,36.4505475 75.7514548,35.3163567 73.624897,35.3163567 C71.4983392,35.3163567 70.1475069,36.6982444 70.1475069,38.9144794 L70.1475069,47.2188423 L67.2719728,47.2188423 Z M91.2423018,47.7272727 C85.4644844,47.7272727 81.9068468,43.9466365 81.9068468,37.8063619 C81.9068468,31.6660873 85.4511098,27.8984877 91.2423018,27.8984877 C96.0972734,27.8984877 99.7752822,31.0533635 99.9224025,35.3163567 L95.2011767,35.3163567 C94.9470598,33.2695985 93.3554851,31.8877108 91.2423018,31.8877108 C88.5540118,31.8877108 86.9089388,34.1300191 86.9089388,37.7933252 C86.9089388,41.469668 88.5540118,43.7380497 91.2556764,43.7380497 C93.3688596,43.7380497 94.9470598,42.4083087 95.2279259,40.3876238 L99.9357771,40.3876238 C99.7752822,44.6897271 96.1908955,47.7272727 91.2423018,47.7272727 Z M108.699212,35.6422736 C107.147761,35.6422736 106.06442,36.6982444 105.944049,38.3408656 L111.347378,38.3408656 C111.267131,36.6460977 110.277412,35.6422736 108.699212,35.6422736 Z M111.521248,42.9428124 L115.841236,42.9428124 C115.319627,45.7717712 112.591214,47.5577959 108.739335,47.5577959 C103.99136,47.5577959 101.262947,44.8200939 101.262947,40.0617069 C101.262947,35.2772467 104.058233,32.3700678 108.672463,32.3700678 C113.259943,32.3700678 115.934858,35.0816965 115.934858,39.7097167 L115.934858,40.987311 L105.9173,40.987311 L105.9173,41.2219711 C105.957423,43.1122892 107.067513,44.2855901 108.873081,44.2855901 C110.250663,44.2855901 111.200258,43.7901964 111.521248,42.9428124 Z M117.82376,47.2188423 L117.82376,32.7090214 L122.424614,32.7090214 L122.424614,35.0686598 L122.678731,35.0686598 C123.334086,33.4260386 124.885537,32.3700678 127.038844,32.3700678 C130.355739,32.3700678 132.081059,34.3646793 132.081059,37.8454719 L132.081059,47.2188423 L127.346459,47.2188423 L127.346459,38.8753694 C127.346459,37.115418 126.610857,36.1376673 125.005908,36.1376673 C123.467832,36.1376673 122.544986,37.2588215 122.544986,38.9275161 L122.544986,47.2188423 L117.82376,47.2188423 Z M135.762155,29.3846689 L140.48338,29.3846689 L140.48338,32.9045715 L143.479286,32.9045715 L143.479286,36.3332175 L140.48338,36.3332175 L140.48338,42.2127586 C140.48338,43.3078394 141.058487,43.8423431 142.288948,43.8423431 C142.837306,43.8423431 143.131547,43.8162698 143.479286,43.7771597 L143.479286,47.0624022 C142.984426,47.1666956 142.115079,47.2449157 141.218982,47.2449157 C137.300231,47.2449157 135.762155,46.0846515 135.762155,43.242656 L135.762155,36.3332175 L133.475102,36.3332175 L133.475102,32.9045715 L135.762155,32.9045715 L135.762155,29.3846689 Z M145.542057,47.2188423 L145.542057,32.7090214 L150.142912,32.7090214 L150.142912,35.0947332 L150.397029,35.0947332 C150.758142,33.6346254 152.202596,32.4873979 154.061663,32.4873979 C154.690268,32.4873979 155.42587,32.5656179 155.773609,32.7090214 L155.773609,36.633061 C155.412495,36.4896576 154.4629,36.3723275 153.740673,36.3723275 C151.654239,36.3723275 150.263283,37.519555 150.263283,39.5402399 L150.263283,47.2188423 L145.542057,47.2188423 Z M162.557606,44.2204067 C164.055558,44.2204067 165.219147,43.2556927 165.219147,42.0041717 L165.219147,41.0524944 L162.718101,41.2089345 C161.31377,41.3132279 160.578168,41.8477316 160.578168,42.7211889 C160.578168,43.646793 161.367268,44.2204067 162.557606,44.2204067 Z M160.832285,47.4404658 C157.970126,47.4404658 156.017437,45.7065879 156.017437,43.0471059 C156.017437,40.4006605 158.130621,38.8623327 161.969124,38.6407092 L165.219147,38.4581957 L165.219147,37.3240049 C165.219147,36.3462541 164.47017,35.7596037 163.159462,35.7596037 C161.915626,35.7596037 161.113151,36.1637407 160.805536,36.9329046 L156.552421,36.9329046 C156.766414,34.1169824 159.401206,32.3700678 163.426953,32.3700678 C167.532949,32.3700678 169.8735,34.1952025 169.8735,37.3240049 L169.8735,47.2188423 L165.272645,47.2188423 L165.272645,45.419781 L165.018528,45.419781 C164.349799,46.6582653 162.718101,47.4404658 160.832285,47.4404658 Z M172.551501,47.2188423 L172.551501,27.2727273 L177.272727,27.2727273 L177.272727,47.2188423 L172.551501,47.2188423 Z"/>
                      </svg>
                    </div>
                  </div>
                </figure>TrenCentral
              </button>
              <button data-type="MerVal" ontouchend="selectThisCard('MerVal');" class="card-selector merval">
                <figure class="small-card">
                  <div class="card merval">
                    <div class="card-logo">
                      <svg data-type="MerVal" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75">
                        <path fill="#FFF" d="M22.7072011,33.2880435 L22.7072011,24.0404212 L24.4650136,24.0404212 L24.4650136,25.5264946 L24.6008832,25.5264946 C25.0084918,24.4819973 25.9425951,23.8620924 27.173913,23.8620924 C28.4391984,23.8620924 29.3138587,24.5159647 29.7214674,25.5264946 L29.8658288,25.5264946 C30.3328804,24.5159647 31.3943614,23.8620924 32.6766304,23.8620924 C34.544837,23.8620924 35.6317935,24.9915082 35.6317935,26.9191576 L35.6317935,33.2880435 L33.8060462,33.2880435 L33.8060462,27.3947011 C33.8060462,26.1463995 33.2116168,25.5349864 32.0142663,25.5349864 C30.8338995,25.5349864 30.0611413,26.3841712 30.0611413,27.4711277 L30.0611413,33.2880435 L28.2693614,33.2880435 L28.2693614,27.2163723 C28.2693614,26.171875 27.5730299,25.5349864 26.4860734,25.5349864 C25.3736413,25.5349864 24.5329484,26.4436141 24.5329484,27.6324728 L24.5329484,33.2880435 L22.7072011,33.2880435 Z M41.3232912,25.4161005 C39.9730874,25.4161005 39.0304923,26.3671875 38.9285901,27.8108016 L43.5991064,27.8108016 C43.5566472,26.3586957 42.673495,25.4161005 41.3232912,25.4161005 Z M43.5906146,30.7914402 L45.3484271,30.7914402 C44.9323265,32.4473505 43.454745,33.4663723 41.3402749,33.4663723 C38.6908184,33.4663723 37.0688754,31.6491168 37.0688754,28.6939538 C37.0688754,25.7387908 38.7247858,23.8620924 41.331783,23.8620924 C43.9048129,23.8620924 45.4588211,25.6199049 45.4588211,28.5241168 L45.4588211,29.1610054 L38.9285901,29.1610054 L38.9285901,29.2629076 C38.988033,30.8848505 39.9306282,31.9123641 41.391226,31.9123641 C42.4951662,31.9123641 43.2509407,31.5132473 43.5906146,30.7914402 Z M47.626202,21.7391304 L49.4519492,21.7391304 L49.4519492,24.0828804 L51.4560253,24.0828804 L51.4560253,25.6199049 L49.4519492,25.6199049 L49.4519492,30.3753397 C49.4519492,31.3434103 49.8510661,31.7680027 50.7596938,31.7680027 C51.0399248,31.7680027 51.2012699,31.751019 51.4560253,31.7255435 L51.4560253,33.2455842 C51.1588107,33.2965353 50.8191367,33.3389946 50.4624791,33.3389946 C48.4329275,33.3389946 47.626202,32.6256793 47.626202,30.8423913 L47.626202,25.6199049 L46.1571123,25.6199049 L46.1571123,24.0828804 L47.626202,24.0828804 L47.626202,21.7391304 Z M52.9355665,33.2880435 L52.9355665,24.0404212 L54.693379,24.0404212 L54.693379,25.4585598 L54.8292486,25.4585598 C55.0924959,24.5499321 56.1200095,23.8875679 57.3258518,23.8875679 C57.597591,23.8875679 57.9457567,23.9130435 58.1410692,23.9639946 L58.1410692,25.7642663 C57.988216,25.7133152 57.4447377,25.6538723 57.1220475,25.6538723 C55.7378763,25.6538723 54.7613138,26.5285326 54.7613138,27.8277853 L54.7613138,33.2880435 L52.9355665,33.2880435 Z M62.8984637,33.4663723 C60.1895642,33.4663723 58.5336539,31.6576087 58.5336539,28.6599864 C58.5336539,25.6793478 60.1980561,23.8620924 62.8984637,23.8620924 C65.5903795,23.8620924 67.2547816,25.6793478 67.2547816,28.6599864 C67.2547816,31.6576087 65.5988713,33.4663723 62.8984637,33.4663723 Z M62.8984637,31.8444293 C64.4779474,31.8444293 65.3780833,30.6725543 65.3780833,28.6599864 C65.3780833,26.6559103 64.4779474,25.4840353 62.8984637,25.4840353 C61.3104882,25.4840353 60.4188441,26.6559103 60.4188441,28.6599864 C60.4188441,30.6810462 61.3104882,31.8444293 62.8984637,31.8444293 Z M31.5387228,40.1409647 L28.3882473,49.5923913 L24.9235734,49.5923913 L21.7391304,40.1409647 L24.9745245,40.1409647 L26.6134511,46.9004755 L26.7747962,46.9004755 L28.3797554,40.1409647 L31.5387228,40.1409647 Z M35.7950983,47.6392663 C36.7461852,47.6392663 37.484976,47.0108696 37.484976,46.1956522 L37.484976,45.5757473 L35.8970004,45.6776495 C35.0053564,45.7455842 34.5383048,46.09375 34.5383048,46.6627038 C34.5383048,47.265625 35.0393238,47.6392663 35.7950983,47.6392663 Z M34.6996499,49.7367527 C32.8823945,49.7367527 31.6425847,48.607337 31.6425847,46.875 C31.6425847,45.1511549 32.9842966,44.1491168 35.421457,44.0047554 L37.484976,43.8858696 L37.484976,43.1470788 C37.484976,42.5101902 37.0094325,42.1280571 36.1772314,42.1280571 C35.3874896,42.1280571 34.8779787,42.3913043 34.6826662,42.8923234 L31.9822586,42.8923234 C32.1181282,41.0580842 33.7910222,39.9201766 36.3470684,39.9201766 C38.9540657,39.9201766 40.440139,41.1090353 40.440139,43.1470788 L40.440139,49.5923913 L37.5189434,49.5923913 L37.5189434,48.4205163 L37.3575983,48.4205163 C36.9330059,49.2272418 35.8970004,49.7367527 34.6996499,49.7367527 Z M42.1404683,49.5923913 L42.1404683,36.5998641 L45.1380905,36.5998641 L45.1380905,49.5923913 L42.1404683,49.5923913 Z M52.799697,39.9966033 C55.1859062,39.9966033 56.6040448,41.7713995 56.6040448,44.8624321 C56.6040448,47.9449728 55.2198736,49.7367527 52.8676317,49.7367527 C51.5004442,49.7367527 50.4984062,49.1423234 50.0568301,48.1402853 L49.895485,48.1402853 L49.895485,52.7173913 L46.8978627,52.7173913 L46.8978627,40.1409647 L49.8190584,40.1409647 L49.8190584,41.6779891 L49.9804035,41.6779891 C50.4474551,40.625 51.4919524,39.9966033 52.799697,39.9966033 Z M51.7042486,47.376019 C52.850648,47.376019 53.521504,46.4334239 53.521504,44.8624321 C53.521504,43.3084239 52.8421562,42.357337 51.7042486,42.357337 C50.5748328,42.357337 49.8785013,43.3084239 49.8785013,44.8709239 C49.8785013,46.4419158 50.566341,47.376019 51.7042486,47.376019 Z M61.4803251,47.6392663 C62.4314121,47.6392663 63.1702028,47.0108696 63.1702028,46.1956522 L63.1702028,45.5757473 L61.5822273,45.6776495 C60.6905833,45.7455842 60.2235316,46.09375 60.2235316,46.6627038 C60.2235316,47.265625 60.7245507,47.6392663 61.4803251,47.6392663 Z M60.3848767,49.7367527 C58.5676213,49.7367527 57.3278115,48.607337 57.3278115,46.875 C57.3278115,45.1511549 58.6695235,44.1491168 61.1066838,44.0047554 L63.1702028,43.8858696 L63.1702028,43.1470788 C63.1702028,42.5101902 62.6946593,42.1280571 61.8624583,42.1280571 C61.0727164,42.1280571 60.5632055,42.3913043 60.367893,42.8923234 L57.6674854,42.8923234 C57.803355,41.0580842 59.476249,39.9201766 62.0322952,39.9201766 C64.6392925,39.9201766 66.1253659,41.1090353 66.1253659,43.1470788 L66.1253659,49.5923913 L63.2041702,49.5923913 L63.2041702,48.4205163 L63.0428251,48.4205163 C62.6182327,49.2272418 61.5822273,49.7367527 60.3848767,49.7367527 Z M67.7407766,49.5923913 L67.7407766,40.1409647 L70.6619723,40.1409647 L70.6619723,41.6949728 L70.8233174,41.6949728 C71.0525973,40.7438859 71.9697168,39.9966033 73.1500837,39.9966033 C73.5492005,39.9966033 74.0162522,40.0475543 74.2370402,40.1409647 L74.2370402,42.6970109 C74.0077603,42.6036005 73.4048391,42.5271739 72.9462793,42.5271739 C71.6215511,42.5271739 70.7383989,43.2744565 70.7383989,44.5906929 L70.7383989,49.5923913 L67.7407766,49.5923913 Z M78.5443667,47.6392663 C79.4954537,47.6392663 80.2342445,47.0108696 80.2342445,46.1956522 L80.2342445,45.5757473 L78.6462689,45.6776495 C77.7546249,45.7455842 77.2875733,46.09375 77.2875733,46.6627038 C77.2875733,47.265625 77.7885923,47.6392663 78.5443667,47.6392663 Z M77.4489184,49.7367527 C75.6316629,49.7367527 74.3918532,48.607337 74.3918532,46.875 C74.3918532,45.1511549 75.7335651,44.1491168 78.1707254,44.0047554 L80.2342445,43.8858696 L80.2342445,43.1470788 C80.2342445,42.5101902 79.758701,42.1280571 78.9264999,42.1280571 C78.136758,42.1280571 77.6272472,42.3913043 77.4319347,42.8923234 L74.7315271,42.8923234 C74.8673966,41.0580842 76.5402907,39.9201766 79.0963368,39.9201766 C81.7033341,39.9201766 83.1894075,41.1090353 83.1894075,43.1470788 L83.1894075,49.5923913 L80.2682118,49.5923913 L80.2682118,48.4205163 L80.1068667,48.4205163 C79.6822743,49.2272418 78.6462689,49.7367527 77.4489184,49.7367527 Z M84.8048183,49.5923913 L84.8048183,40.1409647 L87.8109324,40.1409647 L87.8109324,49.5923913 L84.8048183,49.5923913 Z M87.4372911,38.6548913 L84.8133101,38.6548913 L86.8938128,35.6063179 L89.9169107,35.6063179 L87.4372911,38.6548913 Z M89.2819817,42.9857337 C89.2819817,41.1090353 90.886941,39.9201766 93.4344953,39.9201766 C96.0499845,39.9201766 97.4851067,40.9307065 97.5955008,42.8328804 L94.8611258,42.8328804 C94.7762073,42.2809103 94.2751883,41.9497283 93.4599709,41.9497283 C92.6787209,41.9497283 92.1352426,42.2894022 92.1352426,42.798913 C92.1352426,43.1980299 92.4749165,43.4358016 93.2221991,43.5971467 L95.1753241,43.9962636 C97.0350388,44.3868886 97.8417643,45.1596467 97.8417643,46.594769 C97.8417643,48.5563859 96.1179192,49.8131793 93.4769546,49.8131793 C90.7680551,49.8131793 89.2225388,48.7856658 89.0527018,46.8834918 L91.948422,46.8834918 C92.1012752,47.4694293 92.6362616,47.7836277 93.5194138,47.7836277 C94.343123,47.7836277 94.8781095,47.4524457 94.8781095,46.9429348 C94.8781095,46.5438179 94.5978785,46.3315217 93.842104,46.1701766 L92.0842915,45.7965353 C90.2075932,45.3974185 89.2819817,44.4718071 89.2819817,42.9857337 Z M103.414376,49.8131793 C100.391278,49.8131793 98.5994985,47.9704484 98.5994985,44.8624321 C98.5994985,41.8053668 100.442229,39.9201766 103.414376,39.9201766 C106.403507,39.9201766 108.229254,41.7883832 108.229254,44.8624321 C108.229254,47.9789402 106.445966,49.8131793 103.414376,49.8131793 Z M103.414376,47.5203804 C104.518316,47.5203804 105.146713,46.5438179 105.146713,44.8624321 C105.146713,43.2150136 104.501333,42.2129755 103.414376,42.2129755 C102.32742,42.2129755 101.682039,43.2150136 101.682039,44.8624321 C101.682039,46.5523098 102.310436,47.5203804 103.414376,47.5203804 Z"/>
                      </svg>
                    </div>
                  </div>
                </figure>MerVal
              </button>
              <button data-type="BioTren" ontouchend="selectThisCard('BioTren');" class="card-selector">
                <figure class="small-card">
                  <div class="card biotren">
                    <div class="card-logo">
                      <svg data-type="BioTren" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75">
                        <path fill="#FFF" d="M35.1695668,47.8204901 L27.2727273,47.8204901 L27.2727273,28.6044034 L34.9964489,28.6044034 C38.6052912,28.6044034 40.7759233,30.4421165 40.7759233,33.3984375 C40.7759233,35.4092685 39.2977628,37.2070312 37.4067827,37.5266335 L37.4067827,37.7530185 C40.0035511,38.0193537 41.7347301,39.8703835 41.7347301,42.3739347 C41.7347301,45.756392 39.2711293,47.8204901 35.1695668,47.8204901 Z M30.2556818,31.1345881 L30.2556818,36.7409446 L33.7979403,36.7409446 C36.4346591,36.7409446 37.8062855,35.768821 37.8062855,33.9444247 C37.8062855,32.1732955 36.5145597,31.1345881 34.3039773,31.1345881 L30.2556818,31.1345881 Z M30.2556818,45.2903054 L34.5703125,45.2903054 C37.2602983,45.2903054 38.6851918,44.198331 38.6851918,42.1608665 C38.6851918,40.1500355 37.2070312,39.0980114 34.3971946,39.0980114 L30.2556818,39.0980114 L30.2556818,45.2903054 Z M44.2280375,47.8204901 L44.2280375,33.3185369 L47.0778245,33.3185369 L47.0778245,47.8204901 L44.2280375,47.8204901 Z M45.652931,30.7750355 C44.5875901,30.7750355 43.8019012,30.0159801 43.8019012,29.0305398 C43.8019012,28.0317827 44.5875901,27.2727273 45.652931,27.2727273 C46.7182719,27.2727273 47.5039608,28.0317827 47.5039608,29.0305398 C47.5039608,30.0159801 46.7182719,30.7750355 45.652931,30.7750355 Z M56.3626802,48.100142 C52.1146333,48.100142 49.5178649,45.2636719 49.5178649,40.5628551 C49.5178649,35.8886719 52.1279501,33.0388849 56.3626802,33.0388849 C60.5840936,33.0388849 63.1941788,35.8886719 63.1941788,40.5628551 C63.1941788,45.2636719 60.5974103,48.100142 56.3626802,48.100142 Z M56.3626802,45.5566406 C58.8395978,45.5566406 60.2511745,43.7189276 60.2511745,40.5628551 C60.2511745,37.4200994 58.8395978,35.5823864 56.3626802,35.5823864 C53.8724458,35.5823864 52.4741859,37.4200994 52.4741859,40.5628551 C52.4741859,43.7322443 53.8724458,45.5566406 56.3626802,45.5566406 Z M75.12907,47.8204901 L70.2551354,47.8204901 L70.2551354,32.532848 L64.7153626,32.532848 L64.7153626,28.6044034 L80.6821595,28.6044034 L80.6821595,32.532848 L75.12907,32.532848 L75.12907,47.8204901 Z M81.3910209,47.8204901 L81.3910209,32.9989347 L85.9719868,32.9989347 L85.9719868,35.435902 L86.2250053,35.435902 C86.5845579,33.9444247 88.0227681,32.7725497 89.8737979,32.7725497 C90.4996857,32.7725497 91.2321076,32.8524503 91.5783434,32.9989347 L91.5783434,37.0072798 C91.2187908,36.8607955 90.2733007,36.7409446 89.5541956,36.7409446 C87.4767809,36.7409446 86.0918377,37.9128196 86.0918377,39.9769176 L86.0918377,47.8204901 L81.3910209,47.8204901 Z M99.3717218,35.995206 C97.8269775,35.995206 96.7483198,37.0738636 96.628469,38.7517756 L102.008441,38.7517756 C101.92854,37.0205966 100.9431,35.995206 99.3717218,35.995206 Z M102.181558,43.4525923 L106.482872,43.4525923 C105.963519,46.3423295 103.246899,48.1667259 99.4116721,48.1667259 C94.6842218,48.1667259 91.9676025,45.370206 91.9676025,40.5095881 C91.9676025,35.6223366 94.7508056,32.6526989 99.3450883,32.6526989 C103.912737,32.6526989 106.57609,35.4225852 106.57609,40.1500355 L106.57609,41.4550781 L96.6018355,41.4550781 L96.6018355,41.6947798 C96.6417857,43.6257102 97.7470769,44.8242188 99.5448397,44.8242188 C100.916466,44.8242188 101.861956,44.3181818 102.181558,43.4525923 Z M108.456826,47.8204901 L108.456826,32.9989347 L113.037792,32.9989347 L113.037792,35.4092685 L113.29081,35.4092685 C113.943332,33.7313565 115.488076,32.6526989 117.632075,32.6526989 C120.934632,32.6526989 122.652494,34.6901634 122.652494,38.2457386 L122.652494,47.8204901 L117.93836,47.8204901 L117.93836,39.2977628 C117.93836,37.5 117.205938,36.5012429 115.607927,36.5012429 C114.076499,36.5012429 113.157643,37.6464844 113.157643,39.3510298 L113.157643,47.8204901 L108.456826,47.8204901 Z"/>
                      </svg>
                    </div>
                  </div>
                </figure>BioTren
              </button>
            </div>

            <label for="transitCard" class="txt-black">Número de tarjeta</label>
            <input pattern="[0-9]*" autocomplete="off" id="transitCard" type="text" value="" placeholder="12345678" onkeydown="if (event.keyCode == 13) addCard()">
            <button class="big" ontouchend="addCard()">Agregar</button>
          </div>
          <div class="menu" id="myCards">
            <div class="header">
              <h3>Mis Tarjetas</h3>
              <button class="close" ontouchend="closeMenu('myCards');"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                <path fill="#A2A2A2" d="M345,434 C350.53,434 355,438.47 355,444 C355,449.53 350.53,454 345,454 C339.47,454 335,449.53 335,444 C335,438.47 339.47,434 345,434 L345,434 Z M348.59,439 L345,442.59 L341.41,439 L340,440.41 L343.59,444 L340,447.59 L341.41,449 L345,445.41 L348.59,449 L350,447.59 L346.41,444 L350,440.41 L348.59,439 Z" transform="translate(-335 -434)"></path>
              </svg></span></button>
            </div>
            <div class="saved-cards">
            </div>
            <h4 tabindex="0" class="a txt-blue addCardButton" role="button" ontouchend="openMenu('addCard');">Agregar Tarjeta</h4>
            <div class="privacy-note">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="21" viewBox="0 0 16 21">
                <path fill="#9013FE" d="M16,13 L16,23 C16,24.1045695 15.1045695,25 14,25 L2,25 C0.8954305,25 0,24.1045695 0,23 L0,13 C0,11.89 0.9,11 2,11 L3,11 L3,9 C3,6.23857625 5.23857625,4 8,4 C9.32608245,4 10.597852,4.5267842 11.5355339,5.46446609 C12.4732158,6.40214799 13,7.67391755 13,9 L13,11 L14,11 C15.1045695,11 16,11.8954305 16,13 Z M8,6 C6.34314575,6 5,7.34314575 5,9 L5,11 L11,11 L11,9 C11,7.34314575 9.65685425,6 8,6 Z" transform="translate(0 -4)"></path>
              </svg>
              <h4>Tu información está protegida</h4>
              <p>Saldo Red no recopila nada de ti, y utiliza el almacenamiento local de tu dispositivo para recordar tus tarjetas.</p>
            </div>
          </div>
          <div class="menu webview" id="addMoney">
            <div class="header">
              <h3>Carga Directa</h3>
              <button class="close" ontouchend="closeMenu('addMoney');"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                <path fill="#A2A2A2" d="M345,434 C350.53,434 355,438.47 355,444 C355,449.53 350.53,454 345,454 C339.47,454 335,449.53 335,444 C335,438.47 339.47,434 345,434 L345,434 Z M348.59,439 L345,442.59 L341.41,439 L340,440.41 L343.59,444 L340,447.59 L341.41,449 L345,445.41 L348.59,449 L350,447.59 L346.41,444 L350,440.41 L348.59,439 Z" transform="translate(-335 -434)"></path>
              </svg></span></button>
            </div>
            <div class="webview">
              <iframe name="tbk" id="tbk" src=""></iframe>
            </div>
            <div class="web-buttons">
              <!-- <input type="button" value="Back" ontouchend="tbk.history.back()"> -->
            </div>
          </div>
        </div>

        <main class="">

          <figure class="card" aria-label="Tarjeta" ontouchstart="openMenu('myCards');" tabindex="0">
            <div class="neutral-card-overlay"></div>
            <div class="card-logo">

              <svg data-type="Bip" class="pase-hide trencentral-hide merval-hide biotren-hide" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75"><path fill="#F9BE03" fill-rule="evenodd" d="M20,23.3227848 L25.6630224,23.3227848 L25.6630224,32.6600795 C26.8333804,31.2464651 27.7772174,30.5768583 29.7026451,30.5768583 C33.062705,30.5768583 35.1391466,33.8132911 35.1391466,38.9469432 C35.1391466,43.9317937 32.5719097,47.8006329 28.6455475,47.8006329 C27.0976547,47.8006329 26.1538177,46.9450242 25.2854876,46.0522152 L23.8131018,47.5402303 L20,47.5402303 L20,23.3227848 Z M25.67718,42.2589486 C26.0145394,42.7782993 26.4268676,43.0379747 27.1015865,43.0379747 C28.525993,43.0379747 29.3506494,41.4799225 29.3506494,39.0686512 C29.3506494,36.583187 28.6384461,35.2848101 27.3639771,35.2848101 C25.977055,35.2848101 25.67718,36.583187 25.67718,38.3267216 L25.67718,42.2589486 Z M36.9202226,31.1867089 L42.5974026,31.1867089 L42.5974026,47.4683544 L36.9202226,47.4683544 L36.9202226,31.1867089 Z M50.2563115,32.8215861 C51.1933491,31.4493431 52.4677203,30.5221519 54.4542402,30.5221519 C57.9400202,30.5221519 59.851577,34.1567415 59.851577,38.9039605 C59.851577,44.652546 56.665649,47.6937332 53.7420915,47.6937332 C52.3927573,47.6937332 51.3057937,47.1745061 50.5936451,46.3956655 L50.5936451,55 L45.0463822,55 L45.0463822,31.0784666 L49.8065334,31.0784666 L50.2563115,32.8215861 Z M50.6122449,42.2626582 C50.6864564,42.5580169 51.3543599,43.0379747 51.9480519,43.0379747 C53.5064935,43.0379747 54.0630798,41.1919831 54.0630798,39.1613924 C54.0630798,36.8723629 53.729128,35.2848101 52.2077922,35.2848101 C50.9090909,35.2848101 50.6122449,36.6508439 50.6122449,38.3491561 L50.6122449,42.2626582 Z M80,23.2651899 L70.5717576,42.2626582 L64.7495362,39.6653481 L72.1869545,20 L80,23.2651899 Z M36.8089054,25.8900805 C36.8089054,24.1227145 38.0862709,22.7689873 39.8520408,22.7689873 C41.5426716,22.7689873 42.8200371,24.1227145 42.8200371,25.8900805 C42.8200371,27.5822394 41.5426716,28.8607595 39.8520408,28.8607595 C38.0862709,28.8607595 36.8089054,27.5822394 36.8089054,25.8900805 Z M60.6307978,47.2280545 C60.6307978,44.7807512 62.4648589,43.0379747 64.9726568,43.0379747 C67.405595,43.0379747 69.2022263,44.7807512 69.2022263,47.2280545 C69.2022263,49.7865988 67.405595,51.5664557 64.9726568,51.5664557 C62.4648589,51.5664557 60.6307978,49.7865988 60.6307978,47.2280545 Z"/></svg>

              <svg data-type="Pase" class="bip-hide trencentral-hide merval-hide biotren-hide" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75">
                <path fill="#0A593E" fill-rule="evenodd" d="M40.7699449,28.9577195 L36.8878878,28.9577195 L36.8878878,48.0702979 C36.8878878,49.9388725 35.3731088,51.4536516 33.5045341,51.4536516 L33.5045341,51.4536516 C31.6359594,51.4536516 30.1211804,49.9388725 30.1211804,48.0702979 L30.1211804,28.9577195 L26.1976097,28.9577195 C24.6732432,28.9577195 23.4375,27.7219763 23.4375,26.1976097 L23.4375,26.1976097 C23.4375,24.6732432 24.6732432,23.4375 26.1976097,23.4375 L40.7699449,23.4375 C42.2943115,23.4375 43.5300547,24.6732432 43.5300547,26.1976097 L43.5300547,26.1976097 C43.5300547,27.7219763 42.2943115,28.9577195 40.7699449,28.9577195 Z M69.4765631,51.5625 L60.357027,51.5625 C60.0248315,51.5625 59.7290048,51.3523174 59.6196856,51.0386247 L52.179577,29.6891491 L52.0129612,29.6891491 L52.5539211,48.6270932 C52.598926,50.2026261 51.3581879,51.5163315 49.782655,51.5613364 C49.7554991,51.5621121 49.7283335,51.5625 49.7011665,51.5625 L49.7011665,51.5625 C48.0793248,51.5625 46.7645623,50.2477375 46.7645623,48.6258959 L46.7645623,24.3271808 C46.7645623,23.895939 47.1141529,23.5463484 47.5453947,23.5463484 L56.3321718,23.5463484 C56.6641365,23.5463484 56.9598106,23.7562436 57.0693061,24.0696304 L64.7174189,45.9592697 L64.8840347,45.9592697 L64.3427989,26.5442688 C64.2979113,24.9340763 65.5668416,23.5923687 67.1770341,23.5474811 C67.2041196,23.546726 67.2312143,23.5463484 67.2583104,23.5463484 L67.2583104,23.5463484 C68.9146593,23.5463484 70.2573955,24.8890845 70.2573955,26.5454335 L70.2573955,50.7816676 C70.2573955,51.2129094 69.9078049,51.5625 69.4765631,51.5625 Z M91.010643,51.4536516 L75.5121427,51.4536516 L75.5121427,23.4375 L90.9898903,23.4375 C92.5142568,23.4375 93.75,24.6732432 93.75,26.1976097 L93.75,26.1976097 C93.75,27.7219763 92.5142568,28.9577195 90.9898903,28.9577195 L82.1212745,28.9577195 L82.1212745,34.477939 L87.9297054,34.477939 C89.415402,34.477939 90.619797,35.682334 90.619797,37.1680306 C90.619797,37.2329391 90.6174478,37.2978264 90.6127539,37.362565 L90.6127539,37.362565 C90.4948747,38.9883737 89.1414825,40.247191 87.5114059,40.247191 L82.1212745,40.247191 L82.1212745,45.9749375 L91.010643,45.9749375 C92.5235481,45.9749375 93.75,47.2013894 93.75,48.7142945 L93.75,48.7142945 C93.75,50.2271997 92.5235481,51.4536516 91.010643,51.4536516 Z"/>
              </svg>

              <svg data-type="TrenCentral" class="bip-hide pase-hide merval-hide biotren-hide" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75">
                <path fill="#FFF" d="M36.3406907,47.2188423 L33.3447854,47.2188423 L33.3447854,31.0664001 L27.2727273,31.0664001 L27.2727273,28.4069181 L42.3993743,28.4069181 L42.3993743,31.0664001 L36.3406907,31.0664001 L36.3406907,47.2188423 Z M42.8438217,47.2188423 L42.8438217,33.0219016 L45.6123592,33.0219016 L45.6123592,35.1990266 L45.8263525,35.1990266 C46.2409644,33.8041022 47.8592882,32.7872414 49.7584782,32.7872414 C50.1864647,32.7872414 50.7348224,32.8263515 51.0424377,32.9045715 L51.0424377,35.6683469 C50.8016953,35.5901269 49.9457223,35.4988702 49.4374884,35.4988702 C47.2574323,35.4988702 45.7193559,36.8416478 45.7193559,38.8362593 L45.7193559,47.2188423 L42.8438217,47.2188423 Z M58.3614179,35.1338432 C56.2348601,35.1338432 54.750282,36.593951 54.5897871,38.810186 L61.9458046,38.810186 C61.8789317,36.5809143 60.4879757,35.1338432 58.3614179,35.1338432 Z M61.93243,43.3860594 L64.7009675,43.3860594 C64.0456133,45.9282114 61.7184368,47.4926125 58.388167,47.4926125 C54.2152989,47.4926125 51.6607546,44.7027638 51.6607546,40.1660003 C51.6607546,35.6292369 54.2687972,32.7481314 58.3747924,32.7481314 C62.4272894,32.7481314 64.874837,35.4467234 64.874837,39.9052668 L64.874837,40.8830176 L54.5897871,40.8830176 L54.5897871,41.0394577 C54.6834091,43.5294629 56.1679872,45.1069007 58.4684145,45.1069007 C60.2071095,45.1069007 61.3974469,44.494177 61.93243,43.3860594 Z M67.2719728,47.2188423 L67.2719728,33.0219016 L70.0405103,33.0219016 L70.0405103,35.2772467 L70.2545035,35.2772467 C70.9633561,33.6998088 72.4078105,32.7481314 74.6012412,32.7481314 C77.8512635,32.7481314 79.6434569,34.6514862 79.6434569,38.0279854 L79.6434569,47.2188423 L76.7679227,47.2188423 L76.7679227,38.7319659 C76.7679227,36.4505475 75.7514548,35.3163567 73.624897,35.3163567 C71.4983392,35.3163567 70.1475069,36.6982444 70.1475069,38.9144794 L70.1475069,47.2188423 L67.2719728,47.2188423 Z M91.2423018,47.7272727 C85.4644844,47.7272727 81.9068468,43.9466365 81.9068468,37.8063619 C81.9068468,31.6660873 85.4511098,27.8984877 91.2423018,27.8984877 C96.0972734,27.8984877 99.7752822,31.0533635 99.9224025,35.3163567 L95.2011767,35.3163567 C94.9470598,33.2695985 93.3554851,31.8877108 91.2423018,31.8877108 C88.5540118,31.8877108 86.9089388,34.1300191 86.9089388,37.7933252 C86.9089388,41.469668 88.5540118,43.7380497 91.2556764,43.7380497 C93.3688596,43.7380497 94.9470598,42.4083087 95.2279259,40.3876238 L99.9357771,40.3876238 C99.7752822,44.6897271 96.1908955,47.7272727 91.2423018,47.7272727 Z M108.699212,35.6422736 C107.147761,35.6422736 106.06442,36.6982444 105.944049,38.3408656 L111.347378,38.3408656 C111.267131,36.6460977 110.277412,35.6422736 108.699212,35.6422736 Z M111.521248,42.9428124 L115.841236,42.9428124 C115.319627,45.7717712 112.591214,47.5577959 108.739335,47.5577959 C103.99136,47.5577959 101.262947,44.8200939 101.262947,40.0617069 C101.262947,35.2772467 104.058233,32.3700678 108.672463,32.3700678 C113.259943,32.3700678 115.934858,35.0816965 115.934858,39.7097167 L115.934858,40.987311 L105.9173,40.987311 L105.9173,41.2219711 C105.957423,43.1122892 107.067513,44.2855901 108.873081,44.2855901 C110.250663,44.2855901 111.200258,43.7901964 111.521248,42.9428124 Z M117.82376,47.2188423 L117.82376,32.7090214 L122.424614,32.7090214 L122.424614,35.0686598 L122.678731,35.0686598 C123.334086,33.4260386 124.885537,32.3700678 127.038844,32.3700678 C130.355739,32.3700678 132.081059,34.3646793 132.081059,37.8454719 L132.081059,47.2188423 L127.346459,47.2188423 L127.346459,38.8753694 C127.346459,37.115418 126.610857,36.1376673 125.005908,36.1376673 C123.467832,36.1376673 122.544986,37.2588215 122.544986,38.9275161 L122.544986,47.2188423 L117.82376,47.2188423 Z M135.762155,29.3846689 L140.48338,29.3846689 L140.48338,32.9045715 L143.479286,32.9045715 L143.479286,36.3332175 L140.48338,36.3332175 L140.48338,42.2127586 C140.48338,43.3078394 141.058487,43.8423431 142.288948,43.8423431 C142.837306,43.8423431 143.131547,43.8162698 143.479286,43.7771597 L143.479286,47.0624022 C142.984426,47.1666956 142.115079,47.2449157 141.218982,47.2449157 C137.300231,47.2449157 135.762155,46.0846515 135.762155,43.242656 L135.762155,36.3332175 L133.475102,36.3332175 L133.475102,32.9045715 L135.762155,32.9045715 L135.762155,29.3846689 Z M145.542057,47.2188423 L145.542057,32.7090214 L150.142912,32.7090214 L150.142912,35.0947332 L150.397029,35.0947332 C150.758142,33.6346254 152.202596,32.4873979 154.061663,32.4873979 C154.690268,32.4873979 155.42587,32.5656179 155.773609,32.7090214 L155.773609,36.633061 C155.412495,36.4896576 154.4629,36.3723275 153.740673,36.3723275 C151.654239,36.3723275 150.263283,37.519555 150.263283,39.5402399 L150.263283,47.2188423 L145.542057,47.2188423 Z M162.557606,44.2204067 C164.055558,44.2204067 165.219147,43.2556927 165.219147,42.0041717 L165.219147,41.0524944 L162.718101,41.2089345 C161.31377,41.3132279 160.578168,41.8477316 160.578168,42.7211889 C160.578168,43.646793 161.367268,44.2204067 162.557606,44.2204067 Z M160.832285,47.4404658 C157.970126,47.4404658 156.017437,45.7065879 156.017437,43.0471059 C156.017437,40.4006605 158.130621,38.8623327 161.969124,38.6407092 L165.219147,38.4581957 L165.219147,37.3240049 C165.219147,36.3462541 164.47017,35.7596037 163.159462,35.7596037 C161.915626,35.7596037 161.113151,36.1637407 160.805536,36.9329046 L156.552421,36.9329046 C156.766414,34.1169824 159.401206,32.3700678 163.426953,32.3700678 C167.532949,32.3700678 169.8735,34.1952025 169.8735,37.3240049 L169.8735,47.2188423 L165.272645,47.2188423 L165.272645,45.419781 L165.018528,45.419781 C164.349799,46.6582653 162.718101,47.4404658 160.832285,47.4404658 Z M172.551501,47.2188423 L172.551501,27.2727273 L177.272727,27.2727273 L177.272727,47.2188423 L172.551501,47.2188423 Z"/>
              </svg>

              <svg data-type="MerVal" class="bip-hide pase-hide trencentral-hide biotren-hide" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75">
                <path fill="#FFF" d="M22.7072011,33.2880435 L22.7072011,24.0404212 L24.4650136,24.0404212 L24.4650136,25.5264946 L24.6008832,25.5264946 C25.0084918,24.4819973 25.9425951,23.8620924 27.173913,23.8620924 C28.4391984,23.8620924 29.3138587,24.5159647 29.7214674,25.5264946 L29.8658288,25.5264946 C30.3328804,24.5159647 31.3943614,23.8620924 32.6766304,23.8620924 C34.544837,23.8620924 35.6317935,24.9915082 35.6317935,26.9191576 L35.6317935,33.2880435 L33.8060462,33.2880435 L33.8060462,27.3947011 C33.8060462,26.1463995 33.2116168,25.5349864 32.0142663,25.5349864 C30.8338995,25.5349864 30.0611413,26.3841712 30.0611413,27.4711277 L30.0611413,33.2880435 L28.2693614,33.2880435 L28.2693614,27.2163723 C28.2693614,26.171875 27.5730299,25.5349864 26.4860734,25.5349864 C25.3736413,25.5349864 24.5329484,26.4436141 24.5329484,27.6324728 L24.5329484,33.2880435 L22.7072011,33.2880435 Z M41.3232912,25.4161005 C39.9730874,25.4161005 39.0304923,26.3671875 38.9285901,27.8108016 L43.5991064,27.8108016 C43.5566472,26.3586957 42.673495,25.4161005 41.3232912,25.4161005 Z M43.5906146,30.7914402 L45.3484271,30.7914402 C44.9323265,32.4473505 43.454745,33.4663723 41.3402749,33.4663723 C38.6908184,33.4663723 37.0688754,31.6491168 37.0688754,28.6939538 C37.0688754,25.7387908 38.7247858,23.8620924 41.331783,23.8620924 C43.9048129,23.8620924 45.4588211,25.6199049 45.4588211,28.5241168 L45.4588211,29.1610054 L38.9285901,29.1610054 L38.9285901,29.2629076 C38.988033,30.8848505 39.9306282,31.9123641 41.391226,31.9123641 C42.4951662,31.9123641 43.2509407,31.5132473 43.5906146,30.7914402 Z M47.626202,21.7391304 L49.4519492,21.7391304 L49.4519492,24.0828804 L51.4560253,24.0828804 L51.4560253,25.6199049 L49.4519492,25.6199049 L49.4519492,30.3753397 C49.4519492,31.3434103 49.8510661,31.7680027 50.7596938,31.7680027 C51.0399248,31.7680027 51.2012699,31.751019 51.4560253,31.7255435 L51.4560253,33.2455842 C51.1588107,33.2965353 50.8191367,33.3389946 50.4624791,33.3389946 C48.4329275,33.3389946 47.626202,32.6256793 47.626202,30.8423913 L47.626202,25.6199049 L46.1571123,25.6199049 L46.1571123,24.0828804 L47.626202,24.0828804 L47.626202,21.7391304 Z M52.9355665,33.2880435 L52.9355665,24.0404212 L54.693379,24.0404212 L54.693379,25.4585598 L54.8292486,25.4585598 C55.0924959,24.5499321 56.1200095,23.8875679 57.3258518,23.8875679 C57.597591,23.8875679 57.9457567,23.9130435 58.1410692,23.9639946 L58.1410692,25.7642663 C57.988216,25.7133152 57.4447377,25.6538723 57.1220475,25.6538723 C55.7378763,25.6538723 54.7613138,26.5285326 54.7613138,27.8277853 L54.7613138,33.2880435 L52.9355665,33.2880435 Z M62.8984637,33.4663723 C60.1895642,33.4663723 58.5336539,31.6576087 58.5336539,28.6599864 C58.5336539,25.6793478 60.1980561,23.8620924 62.8984637,23.8620924 C65.5903795,23.8620924 67.2547816,25.6793478 67.2547816,28.6599864 C67.2547816,31.6576087 65.5988713,33.4663723 62.8984637,33.4663723 Z M62.8984637,31.8444293 C64.4779474,31.8444293 65.3780833,30.6725543 65.3780833,28.6599864 C65.3780833,26.6559103 64.4779474,25.4840353 62.8984637,25.4840353 C61.3104882,25.4840353 60.4188441,26.6559103 60.4188441,28.6599864 C60.4188441,30.6810462 61.3104882,31.8444293 62.8984637,31.8444293 Z M31.5387228,40.1409647 L28.3882473,49.5923913 L24.9235734,49.5923913 L21.7391304,40.1409647 L24.9745245,40.1409647 L26.6134511,46.9004755 L26.7747962,46.9004755 L28.3797554,40.1409647 L31.5387228,40.1409647 Z M35.7950983,47.6392663 C36.7461852,47.6392663 37.484976,47.0108696 37.484976,46.1956522 L37.484976,45.5757473 L35.8970004,45.6776495 C35.0053564,45.7455842 34.5383048,46.09375 34.5383048,46.6627038 C34.5383048,47.265625 35.0393238,47.6392663 35.7950983,47.6392663 Z M34.6996499,49.7367527 C32.8823945,49.7367527 31.6425847,48.607337 31.6425847,46.875 C31.6425847,45.1511549 32.9842966,44.1491168 35.421457,44.0047554 L37.484976,43.8858696 L37.484976,43.1470788 C37.484976,42.5101902 37.0094325,42.1280571 36.1772314,42.1280571 C35.3874896,42.1280571 34.8779787,42.3913043 34.6826662,42.8923234 L31.9822586,42.8923234 C32.1181282,41.0580842 33.7910222,39.9201766 36.3470684,39.9201766 C38.9540657,39.9201766 40.440139,41.1090353 40.440139,43.1470788 L40.440139,49.5923913 L37.5189434,49.5923913 L37.5189434,48.4205163 L37.3575983,48.4205163 C36.9330059,49.2272418 35.8970004,49.7367527 34.6996499,49.7367527 Z M42.1404683,49.5923913 L42.1404683,36.5998641 L45.1380905,36.5998641 L45.1380905,49.5923913 L42.1404683,49.5923913 Z M52.799697,39.9966033 C55.1859062,39.9966033 56.6040448,41.7713995 56.6040448,44.8624321 C56.6040448,47.9449728 55.2198736,49.7367527 52.8676317,49.7367527 C51.5004442,49.7367527 50.4984062,49.1423234 50.0568301,48.1402853 L49.895485,48.1402853 L49.895485,52.7173913 L46.8978627,52.7173913 L46.8978627,40.1409647 L49.8190584,40.1409647 L49.8190584,41.6779891 L49.9804035,41.6779891 C50.4474551,40.625 51.4919524,39.9966033 52.799697,39.9966033 Z M51.7042486,47.376019 C52.850648,47.376019 53.521504,46.4334239 53.521504,44.8624321 C53.521504,43.3084239 52.8421562,42.357337 51.7042486,42.357337 C50.5748328,42.357337 49.8785013,43.3084239 49.8785013,44.8709239 C49.8785013,46.4419158 50.566341,47.376019 51.7042486,47.376019 Z M61.4803251,47.6392663 C62.4314121,47.6392663 63.1702028,47.0108696 63.1702028,46.1956522 L63.1702028,45.5757473 L61.5822273,45.6776495 C60.6905833,45.7455842 60.2235316,46.09375 60.2235316,46.6627038 C60.2235316,47.265625 60.7245507,47.6392663 61.4803251,47.6392663 Z M60.3848767,49.7367527 C58.5676213,49.7367527 57.3278115,48.607337 57.3278115,46.875 C57.3278115,45.1511549 58.6695235,44.1491168 61.1066838,44.0047554 L63.1702028,43.8858696 L63.1702028,43.1470788 C63.1702028,42.5101902 62.6946593,42.1280571 61.8624583,42.1280571 C61.0727164,42.1280571 60.5632055,42.3913043 60.367893,42.8923234 L57.6674854,42.8923234 C57.803355,41.0580842 59.476249,39.9201766 62.0322952,39.9201766 C64.6392925,39.9201766 66.1253659,41.1090353 66.1253659,43.1470788 L66.1253659,49.5923913 L63.2041702,49.5923913 L63.2041702,48.4205163 L63.0428251,48.4205163 C62.6182327,49.2272418 61.5822273,49.7367527 60.3848767,49.7367527 Z M67.7407766,49.5923913 L67.7407766,40.1409647 L70.6619723,40.1409647 L70.6619723,41.6949728 L70.8233174,41.6949728 C71.0525973,40.7438859 71.9697168,39.9966033 73.1500837,39.9966033 C73.5492005,39.9966033 74.0162522,40.0475543 74.2370402,40.1409647 L74.2370402,42.6970109 C74.0077603,42.6036005 73.4048391,42.5271739 72.9462793,42.5271739 C71.6215511,42.5271739 70.7383989,43.2744565 70.7383989,44.5906929 L70.7383989,49.5923913 L67.7407766,49.5923913 Z M78.5443667,47.6392663 C79.4954537,47.6392663 80.2342445,47.0108696 80.2342445,46.1956522 L80.2342445,45.5757473 L78.6462689,45.6776495 C77.7546249,45.7455842 77.2875733,46.09375 77.2875733,46.6627038 C77.2875733,47.265625 77.7885923,47.6392663 78.5443667,47.6392663 Z M77.4489184,49.7367527 C75.6316629,49.7367527 74.3918532,48.607337 74.3918532,46.875 C74.3918532,45.1511549 75.7335651,44.1491168 78.1707254,44.0047554 L80.2342445,43.8858696 L80.2342445,43.1470788 C80.2342445,42.5101902 79.758701,42.1280571 78.9264999,42.1280571 C78.136758,42.1280571 77.6272472,42.3913043 77.4319347,42.8923234 L74.7315271,42.8923234 C74.8673966,41.0580842 76.5402907,39.9201766 79.0963368,39.9201766 C81.7033341,39.9201766 83.1894075,41.1090353 83.1894075,43.1470788 L83.1894075,49.5923913 L80.2682118,49.5923913 L80.2682118,48.4205163 L80.1068667,48.4205163 C79.6822743,49.2272418 78.6462689,49.7367527 77.4489184,49.7367527 Z M84.8048183,49.5923913 L84.8048183,40.1409647 L87.8109324,40.1409647 L87.8109324,49.5923913 L84.8048183,49.5923913 Z M87.4372911,38.6548913 L84.8133101,38.6548913 L86.8938128,35.6063179 L89.9169107,35.6063179 L87.4372911,38.6548913 Z M89.2819817,42.9857337 C89.2819817,41.1090353 90.886941,39.9201766 93.4344953,39.9201766 C96.0499845,39.9201766 97.4851067,40.9307065 97.5955008,42.8328804 L94.8611258,42.8328804 C94.7762073,42.2809103 94.2751883,41.9497283 93.4599709,41.9497283 C92.6787209,41.9497283 92.1352426,42.2894022 92.1352426,42.798913 C92.1352426,43.1980299 92.4749165,43.4358016 93.2221991,43.5971467 L95.1753241,43.9962636 C97.0350388,44.3868886 97.8417643,45.1596467 97.8417643,46.594769 C97.8417643,48.5563859 96.1179192,49.8131793 93.4769546,49.8131793 C90.7680551,49.8131793 89.2225388,48.7856658 89.0527018,46.8834918 L91.948422,46.8834918 C92.1012752,47.4694293 92.6362616,47.7836277 93.5194138,47.7836277 C94.343123,47.7836277 94.8781095,47.4524457 94.8781095,46.9429348 C94.8781095,46.5438179 94.5978785,46.3315217 93.842104,46.1701766 L92.0842915,45.7965353 C90.2075932,45.3974185 89.2819817,44.4718071 89.2819817,42.9857337 Z M103.414376,49.8131793 C100.391278,49.8131793 98.5994985,47.9704484 98.5994985,44.8624321 C98.5994985,41.8053668 100.442229,39.9201766 103.414376,39.9201766 C106.403507,39.9201766 108.229254,41.7883832 108.229254,44.8624321 C108.229254,47.9789402 106.445966,49.8131793 103.414376,49.8131793 Z M103.414376,47.5203804 C104.518316,47.5203804 105.146713,46.5438179 105.146713,44.8624321 C105.146713,43.2150136 104.501333,42.2129755 103.414376,42.2129755 C102.32742,42.2129755 101.682039,43.2150136 101.682039,44.8624321 C101.682039,46.5523098 102.310436,47.5203804 103.414376,47.5203804 Z"/>
              </svg>

              <svg data-type="BioTren" class="bip-hide pase-hide trencentral-hide merval-hide" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 75">
                <path fill="#FFF" d="M35.1695668,47.8204901 L27.2727273,47.8204901 L27.2727273,28.6044034 L34.9964489,28.6044034 C38.6052912,28.6044034 40.7759233,30.4421165 40.7759233,33.3984375 C40.7759233,35.4092685 39.2977628,37.2070312 37.4067827,37.5266335 L37.4067827,37.7530185 C40.0035511,38.0193537 41.7347301,39.8703835 41.7347301,42.3739347 C41.7347301,45.756392 39.2711293,47.8204901 35.1695668,47.8204901 Z M30.2556818,31.1345881 L30.2556818,36.7409446 L33.7979403,36.7409446 C36.4346591,36.7409446 37.8062855,35.768821 37.8062855,33.9444247 C37.8062855,32.1732955 36.5145597,31.1345881 34.3039773,31.1345881 L30.2556818,31.1345881 Z M30.2556818,45.2903054 L34.5703125,45.2903054 C37.2602983,45.2903054 38.6851918,44.198331 38.6851918,42.1608665 C38.6851918,40.1500355 37.2070312,39.0980114 34.3971946,39.0980114 L30.2556818,39.0980114 L30.2556818,45.2903054 Z M44.2280375,47.8204901 L44.2280375,33.3185369 L47.0778245,33.3185369 L47.0778245,47.8204901 L44.2280375,47.8204901 Z M45.652931,30.7750355 C44.5875901,30.7750355 43.8019012,30.0159801 43.8019012,29.0305398 C43.8019012,28.0317827 44.5875901,27.2727273 45.652931,27.2727273 C46.7182719,27.2727273 47.5039608,28.0317827 47.5039608,29.0305398 C47.5039608,30.0159801 46.7182719,30.7750355 45.652931,30.7750355 Z M56.3626802,48.100142 C52.1146333,48.100142 49.5178649,45.2636719 49.5178649,40.5628551 C49.5178649,35.8886719 52.1279501,33.0388849 56.3626802,33.0388849 C60.5840936,33.0388849 63.1941788,35.8886719 63.1941788,40.5628551 C63.1941788,45.2636719 60.5974103,48.100142 56.3626802,48.100142 Z M56.3626802,45.5566406 C58.8395978,45.5566406 60.2511745,43.7189276 60.2511745,40.5628551 C60.2511745,37.4200994 58.8395978,35.5823864 56.3626802,35.5823864 C53.8724458,35.5823864 52.4741859,37.4200994 52.4741859,40.5628551 C52.4741859,43.7322443 53.8724458,45.5566406 56.3626802,45.5566406 Z M75.12907,47.8204901 L70.2551354,47.8204901 L70.2551354,32.532848 L64.7153626,32.532848 L64.7153626,28.6044034 L80.6821595,28.6044034 L80.6821595,32.532848 L75.12907,32.532848 L75.12907,47.8204901 Z M81.3910209,47.8204901 L81.3910209,32.9989347 L85.9719868,32.9989347 L85.9719868,35.435902 L86.2250053,35.435902 C86.5845579,33.9444247 88.0227681,32.7725497 89.8737979,32.7725497 C90.4996857,32.7725497 91.2321076,32.8524503 91.5783434,32.9989347 L91.5783434,37.0072798 C91.2187908,36.8607955 90.2733007,36.7409446 89.5541956,36.7409446 C87.4767809,36.7409446 86.0918377,37.9128196 86.0918377,39.9769176 L86.0918377,47.8204901 L81.3910209,47.8204901 Z M99.3717218,35.995206 C97.8269775,35.995206 96.7483198,37.0738636 96.628469,38.7517756 L102.008441,38.7517756 C101.92854,37.0205966 100.9431,35.995206 99.3717218,35.995206 Z M102.181558,43.4525923 L106.482872,43.4525923 C105.963519,46.3423295 103.246899,48.1667259 99.4116721,48.1667259 C94.6842218,48.1667259 91.9676025,45.370206 91.9676025,40.5095881 C91.9676025,35.6223366 94.7508056,32.6526989 99.3450883,32.6526989 C103.912737,32.6526989 106.57609,35.4225852 106.57609,40.1500355 L106.57609,41.4550781 L96.6018355,41.4550781 L96.6018355,41.6947798 C96.6417857,43.6257102 97.7470769,44.8242188 99.5448397,44.8242188 C100.916466,44.8242188 101.861956,44.3181818 102.181558,43.4525923 Z M108.456826,47.8204901 L108.456826,32.9989347 L113.037792,32.9989347 L113.037792,35.4092685 L113.29081,35.4092685 C113.943332,33.7313565 115.488076,32.6526989 117.632075,32.6526989 C120.934632,32.6526989 122.652494,34.6901634 122.652494,38.2457386 L122.652494,47.8204901 L117.93836,47.8204901 L117.93836,39.2977628 C117.93836,37.5 117.205938,36.5012429 115.607927,36.5012429 C114.076499,36.5012429 113.157643,37.6464844 113.157643,39.3510298 L113.157643,47.8204901 L108.456826,47.8204901 Z"/>
              </svg>

            </div>
            <div class="loading-animation"></div>
          </figure>

          <div id="cardInfo">
            <section id="primary">
              <div>
                <h4 class="txt-black">Saldo</h4>
                <h2 class="saldo" class="saldo txt-black">···</h2>
              </div>
              <div class="trencentral-hide merval-hide biotren-hide">
                <h4 class="txt-black">Viajes Restantes</h4>
                <h2 class="leftTrips" class="saldo txt-black">···</h2>
              </div>
            </section>

            <section class="buttons">
              <button class="primary" id="getSaldo" ontouchend="getSaldo();"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">
                <path d="M32.796875,13.203125 C31.4375,11.84375 29.571875,11 27.5,11 C23.3578644,11 20,14.3578644 20,18.5 C20,22.6421356 23.3578644,26 27.5,26 C30.996875,26 33.9125,23.609375 34.746875,20.375 L32.796875,20.375 C32.028125,22.559375 29.946875,24.125 27.5,24.125 C24.3933983,24.125 21.875,21.6066017 21.875,18.5 C21.875,15.3933983 24.3933983,12.875 27.5,12.875 C29.05625,12.875 30.44375,13.521875 31.45625,14.54375 L28.4375,17.5625 L35,17.5625 L35,11 L32.796875,13.203125 Z" transform="translate(-20 -11)"></path>
              </svg></span>Actualizar</button>
              <a href="https://www.metrovalparaiso.cl/carga-en-linea/" target="_blank" rel="noopener" class="button secondary bip-hide pase-hide trencentral-hide biotren-hide" role="button" tabindex="0"><span class="icon" style="transform: scale(1.2);"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="15" viewBox="0 0 18 15">
                <path d="M35.6521739,22.0526316 L38,22.0526316 L38,23.6315789 L35.6521739,23.6315789 L35.6521739,26 L34.0869565,26 L34.0869565,23.6315789 L31.7391304,23.6315789 L31.7391304,22.0526316 L34.0869565,22.0526316 L34.0869565,19.6842105 L35.6521739,19.6842105 L35.6521739,22.0526316 L35.6521739,22.0526316 Z M34.0869565,14.1578947 L34.0869565,12.5789474 L21.5652174,12.5789474 L21.5652174,14.1578947 L34.0869565,14.1578947 L34.0869565,14.1578947 Z M34.0869565,17.3157895 L21.5652174,17.3157895 L21.5652174,22.0526316 L30.173913,22.0526316 L30.173913,23.6315789 L21.5652174,23.6315789 C20.6965217,23.6315789 20,22.9210526 20,22.0526316 L20,12.5789474 C20,11.7026316 20.6965217,11 21.5652174,11 L34.0869565,11 C34.9514022,11 35.6521739,11.7069188 35.6521739,12.5789474 L35.6521739,18.1052632 L34.0869565,18.1052632 L34.0869565,17.3157895 Z" transform="translate(-20 -11)"></path>
              </svg></span>Carga en Línea</a>
            </section>

            <section class="info error">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                <path fill="#F5A623" d="M187.8,332.8 L186.2,332.8 L186.2,328 L187.8,328 L187.8,332.8 Z M187.8,336 L186.2,336 L186.2,334.4 L187.8,334.4 L187.8,336 Z M187,324 C182.581722,324 179,327.581722 179,332 C179,334.121732 179.842855,336.156563 181.343146,337.656854 C182.843437,339.157145 184.878268,340 187,340 C189.121732,340 191.156563,339.157145 192.656854,337.656854 C194.157145,336.156563 195,334.121732 195,332 C195,329.878268 194.157145,327.843437 192.656854,326.343146 C191.156563,324.842855 189.121732,324 187,324 Z" transform="translate(-179 -324)"></path>
              </svg>
              <h4 class="txt-red">Ocurrió un error al consultar tu tarjeta. Inténtalo de nuevo en unos minutos.</h4>
            </section>

            <div class="trencentral-hide merval-hide biotren-hide">
              <h3 class="txt-black" style="margin: 20px 0 -10px 0;">Carga Directa</h3>
              <section class="buttons">
                <button class="secondary addMoney1000" onclick="addMoney('1000');">$1.000</button>
                <button class="secondary addMoney2000" onclick="addMoney('2000');">$2.000</button>
                <button class="secondary addMoney5000" onclick="addMoney('5000');">$5.000</button>
                <button class="secondary addMoney10000" onclick="addMoney('10000');">$10.000</button>
                <button class="secondary addMoney20000" onclick="addMoney('20000');">$20.000</button>
              </section>
            </div>

            <h3 class="txt-black" style="margin: 20px 0 0 0;">Información General</h3>

            <section class="info fares trencentral-hide merval-hide biotren-hide">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                <path fill="#F5A623" d="M8.8,5.15625 L7.2,5.15625 L7.2,3.53125 L8.8,3.53125 L8.8,5.15625 L8.8,5.15625 Z M8.8,8.8125 L7.2,8.8125 L7.2,7.1875 L8.8,7.1875 L8.8,8.8125 L8.8,8.8125 Z M8.8,12.46875 L7.2,12.46875 L7.2,10.84375 L8.8,10.84375 L8.8,12.46875 L8.8,12.46875 Z M16,6.375 L16,3.125 C16,2.223125 15.28,1.5 14.4,1.5 L1.6,1.5 C0.7163444,1.5 0,2.22753728 0,3.125 L0,6.375 C0.888,6.375 1.6,7.10625 1.6,8 C1.6,8.89746272 0.8836556,9.625 0,9.625 L0,12.875 C0,13.7724627 0.7163444,14.5 1.6,14.5 L14.4,14.5 C15.2836556,14.5 16,13.7724627 16,12.875 L16,9.625 C15.1163444,9.625 14.4,8.89746272 14.4,8 C14.4,7.10253728 15.1163444,6.375 16,6.375 Z"></path>
              </svg>
              <div>
                <h4 class="txt-gray">Tarifa</h4>
                <h3 class="txt-black currentFare">···</h3>
              </div>
              <div>
                <h4 class="txt-gray">Bloque</h4>
                <h3 class="txt-black currentBlock">···</h3>
              </div>
              <svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8" class="blink">
                <circle cx="331" cy="589" r="4" fill="#ABABAB" fill-rule="evenodd" transform="translate(-327 -585)"></circle>
              </svg>
            </section>

            <section class="info">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                <path fill="#ABABAB" d="M31,79 L29,79 L29,77 L31,77 L31,79 Z M31,87 L29,87 L29,81 L31,81 L31,87 Z M30,72 C24.4771525,72 20,76.4771525 20,82 C20,84.6521649 21.0535684,87.195704 22.9289322,89.0710678 C24.804296,90.9464316 27.3478351,92 30,92 C32.6521649,92 35.195704,90.9464316 37.0710678,89.0710678 C38.9464316,87.195704 40,84.6521649 40,82 C40,79.3478351 38.9464316,76.804296 37.0710678,74.9289322 C35.195704,73.0535684 32.6521649,72 30,72 Z" transform="translate(-20 -72)"></path>
              </svg>
              <div>
                <h4 class="txt-black">Por qué tu saldo no se actualiza en tiempo real</h4>
                <p class="txt-gray">Cada vez que marcas tu tarjeta, el validador guarda tu transacción y espera a que alguien lo conecte a internet para actualizarla en la nube. Así puede procesar más transacciones por minuto, ¡y evitar retrasos en la vida real!</p>
              </div>
            </section>

            <!-- Enlaces de Interés Bip -->
            <section class="info pase-hide trencentral-hide merval-hide biotren-hide">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                <path fill="#9B9B9B" d="M1.52,8 C1.52,6.632 2.632,5.52 4,5.52 L7.2,5.52 L7.2,4 L4,4 C1.790861,4 0,5.790861 0,8 C0,10.209139 1.790861,12 4,12 L7.2,12 L7.2,10.48 L4,10.48 C2.632,10.48 1.52,9.368 1.52,8 L1.52,8 Z M4.8,8.8 L11.2,8.8 L11.2,7.2 L4.8,7.2 L4.8,8.8 L4.8,8.8 Z M12,4 L8.8,4 L8.8,5.52 L12,5.52 C13.368,5.52 14.48,6.632 14.48,8 C14.48,9.368 13.368,10.48 12,10.48 L8.8,10.48 L8.8,12 L12,12 C14.209139,12 16,10.209139 16,8 C16,5.790861 14.209139,4 12,4 Z"></path>
              </svg>
              <div>
                <h4 class="txt-black">Enlaces de Interés</h4>
                <a href="https://www.metro.cl/tu-viaje/tarifas" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">Tarifas</a>
                <a href="https://saldo.red/privacidad" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">Política de Privacidad</a>
              </div>
            </section>

            <!-- Enlaces de Interés Pase -->
            <section class="info bip-hide trencentral-hide merval-hide biotren-hide">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                <path fill="#9B9B9B" d="M1.52,8 C1.52,6.632 2.632,5.52 4,5.52 L7.2,5.52 L7.2,4 L4,4 C1.790861,4 0,5.790861 0,8 C0,10.209139 1.790861,12 4,12 L7.2,12 L7.2,10.48 L4,10.48 C2.632,10.48 1.52,9.368 1.52,8 L1.52,8 Z M4.8,8.8 L11.2,8.8 L11.2,7.2 L4.8,7.2 L4.8,8.8 L4.8,8.8 Z M12,4 L8.8,4 L8.8,5.52 L12,5.52 C13.368,5.52 14.48,6.632 14.48,8 C14.48,9.368 13.368,10.48 12,10.48 L8.8,10.48 L8.8,12 L12,12 C14.209139,12 16,10.209139 16,8 C16,5.790861 14.209139,4 12,4 Z"></path>
              </svg>
              <div>
                <h4 class="txt-black">Enlaces de Interés</h4>
                <a href="https://www.metro.cl/tu-viaje/tarifas" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">Tarifas</a>
                <a href="https://www.tne.cl/" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">Tarjeta Nacional Estudiantil</a>
                <a href="https://saldo.red/privacidad" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">Política de Privacidad</a>
              </div>
            </section>

            <!-- Enlaces de Interés TrenCentral -->
            <section class="info bip-hide pase-hide merval-hide biotren-hide">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                <path fill="#9B9B9B" d="M1.52,8 C1.52,6.632 2.632,5.52 4,5.52 L7.2,5.52 L7.2,4 L4,4 C1.790861,4 0,5.790861 0,8 C0,10.209139 1.790861,12 4,12 L7.2,12 L7.2,10.48 L4,10.48 C2.632,10.48 1.52,9.368 1.52,8 L1.52,8 Z M4.8,8.8 L11.2,8.8 L11.2,7.2 L4.8,7.2 L4.8,8.8 L4.8,8.8 Z M12,4 L8.8,4 L8.8,5.52 L12,5.52 C13.368,5.52 14.48,6.632 14.48,8 C14.48,9.368 13.368,10.48 12,10.48 L8.8,10.48 L8.8,12 L12,12 C14.209139,12 16,10.209139 16,8 C16,5.790861 14.209139,4 12,4 Z"></path>
              </svg>
              <div>
                <h4 class="txt-black">Enlaces de Interés</h4>
                <a href="https://www.trencentral.cl/" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">TrenCentral</a>
                <a href="https://saldo.red/privacidad" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">Política de Privacidad</a>
              </div>
            </section>

            <!-- Enlaces de Interés MerVal -->
            <section class="info bip-hide pase-hide trencentral-hide biotren-hide">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                <path fill="#9B9B9B" d="M1.52,8 C1.52,6.632 2.632,5.52 4,5.52 L7.2,5.52 L7.2,4 L4,4 C1.790861,4 0,5.790861 0,8 C0,10.209139 1.790861,12 4,12 L7.2,12 L7.2,10.48 L4,10.48 C2.632,10.48 1.52,9.368 1.52,8 L1.52,8 Z M4.8,8.8 L11.2,8.8 L11.2,7.2 L4.8,7.2 L4.8,8.8 L4.8,8.8 Z M12,4 L8.8,4 L8.8,5.52 L12,5.52 C13.368,5.52 14.48,6.632 14.48,8 C14.48,9.368 13.368,10.48 12,10.48 L8.8,10.48 L8.8,12 L12,12 C14.209139,12 16,10.209139 16,8 C16,5.790861 14.209139,4 12,4 Z"></path>
              </svg>
              <div>
                <h4 class="txt-black">Enlaces de Interés</h4>
                <a href="https://www.metrovalparaiso.cl/" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">Metro de Valparaíso</a>
                <a href="https://www.metrovalparaiso.cl/tarifas/" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">Tarifas</a>
                <a href="https://saldo.red/privacidad" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">Política de Privacidad</a>
              </div>
            </section>

            <!-- Enlaces de Interés BioTren -->
            <section class="info bip-hide pase-hide trencentral-hide merval-hide">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
                <path fill="#9B9B9B" d="M1.52,8 C1.52,6.632 2.632,5.52 4,5.52 L7.2,5.52 L7.2,4 L4,4 C1.790861,4 0,5.790861 0,8 C0,10.209139 1.790861,12 4,12 L7.2,12 L7.2,10.48 L4,10.48 C2.632,10.48 1.52,9.368 1.52,8 L1.52,8 Z M4.8,8.8 L11.2,8.8 L11.2,7.2 L4.8,7.2 L4.8,8.8 L4.8,8.8 Z M12,4 L8.8,4 L8.8,5.52 L12,5.52 C13.368,5.52 14.48,6.632 14.48,8 C14.48,9.368 13.368,10.48 12,10.48 L8.8,10.48 L8.8,12 L12,12 C14.209139,12 16,10.209139 16,8 C16,5.790861 14.209139,4 12,4 Z"></path>
              </svg>
              <div>
                <h4 class="txt-black">Enlaces de Interés</h4>
                <a href="http://www.fesur.cl/" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">FeSur</a>
                <a href="http://www.fesur.cl/fesur/planificatuviaje/#seccion-horarios?SERVICIO=BIOTREN" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">Planifica tu Viaje</a>
                <a href="https://saldo.red/privacidad" target="_blank" rel="noopener" class="h4 txt-blue" style="margin-top: 10px;">Política de Privacidad</a>
              </div>
            </section>

            <section class="info">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="21" viewBox="0 0 16 21">
                <path fill="#9013FE" d="M16,13 L16,23 C16,24.1045695 15.1045695,25 14,25 L2,25 C0.8954305,25 0,24.1045695 0,23 L0,13 C0,11.89 0.9,11 2,11 L3,11 L3,9 C3,6.23857625 5.23857625,4 8,4 C9.32608245,4 10.597852,4.5267842 11.5355339,5.46446609 C12.4732158,6.40214799 13,7.67391755 13,9 L13,11 L14,11 C15.1045695,11 16,11.8954305 16,13 Z M8,6 C6.34314575,6 5,7.34314575 5,9 L5,11 L11,11 L11,9 C11,7.34314575 9.65685425,6 8,6 Z" transform="translate(0 -4)"></path>
              </svg>
              <div>
                <h4 class="txt-black">Tu información está protegida</h4>
                <p class="txt-gray">Saldo Red no recopila nada de ti, y utiliza el almacenamiento local de tu dispositivo para recordar tus tarjetas.</p>
              </div>
            </section>

            <h3 class="txt-black" style="margin: 20px 0 0 0;">Tarjetas</h3>

            <h4 tabindex="0" class="a txt-blue addCardButton" ontouchstart="openMenu('addCard');" role="button" style="margin: 20px 0 0 0; width: fit-content; padding: 0; text-align: left;">Agregar Tarjeta</h4>
            <h4 tabindex="0" class="a txt-blue" ontouchstart="deleteCard();" role="button" style="margin: 20px 0 0 0; width: fit-content;">Eliminar Tarjeta</h4>
          </div>

          <div id="onboarding">
            <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 35 35">
              <g fill="none" fill-rule="evenodd">
                <path fill="#717171" fill-rule="nonzero" d="M15.8848921,4.66666667 C16.9974081,4.66666667 17.8992806,5.57204639 17.8992806,6.68888889 L17.8992806,15.7282222 L20.3366906,15.9911111 L30.2877698,20.4197778 C31.3553957,20.9051111 32,21.9768889 32,23.1497778 L32,31.9666667 C31.9395683,33.6248889 30.6302158,34.9393333 28.9784173,35 L15.8848921,35 C15.1194245,35 14.3942446,34.6966667 13.8705036,34.1304444 L4,25.6371111 L5.49064748,24.08 C5.87338129,23.6553333 6.41726619,23.4328889 6.98129496,23.4328889 L7.42446043,23.4328889 L13.8705036,26.9111111 L13.8705036,6.68888889 C13.8705036,5.57204639 14.772376,4.66666667 15.8848921,4.66666667 Z"></path>
                <path class="onboarding-svg-card" fill="#D0021B" fill-rule="nonzero" d="M11.77,10.5 L11.77,12.6 L7.89471964,12.6 C7.27065652,12.6 7.04435616,12.5350221 6.81620801,12.4130071 C6.58805986,12.2909921 6.40900786,12.1119401 6.28699289,11.883792 C6.16497793,11.6556438 6.1,11.4293435 6.1,10.8052804 L6.1,1.79471964 C6.1,1.17065652 6.16497793,0.944356156 6.28699289,0.716208008 C6.40900786,0.488059859 6.58805986,0.309007857 6.81620801,0.186992893 C7.04435616,0.0649779278 7.27065652,0 7.89471964,0 L23.9052804,0 C24.5293435,0 24.7556438,0.0649779278 24.983792,0.186992893 C25.2119401,0.309007857 25.3909921,0.488059859 25.5130071,0.716208008 C25.6350221,0.944356156 25.7,1.17065652 25.7,1.79471964 L25.7,10.8052804 C25.7,11.4293435 25.6350221,11.6556438 25.5130071,11.883792 C25.3909921,12.1119401 25.2119401,12.2909921 24.983792,12.4130071 C24.7556438,12.5350221 24.5293435,12.6 23.9052804,12.6 L20.002,12.6 L20.002,10.5 L23.6,10.5 L23.6,2.1 L8.2,2.1 L8.2,10.5 L11.77,10.5 Z"></path>
              </g>
            </svg>
            <h4 class="txt-black">Toca para ver tus tarjetas guardadas en Saldo Red</h4>
          </div>

        </main>

      </div>

    </div>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
  </body>
  </html>
